<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><title>Container guide</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Container guide"/>
<meta name="description" content="The official guide to SUSE container-related products …"/>
<meta name="book-title" content="Container guide"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="dpopov@suse.com"/>
<meta name="tracker-bsc-component" content="Smart Docs"/>
<meta name="tracker-bsc-product" content="Documentation"/>
<meta name="publisher" content="SUSE"/><meta name="category" content="Containerization"/><meta name="DCTERMS.modified" content="2023-07-04"/><meta property="og:title" content="Container guide"/>
<meta property="og:description" content="&#10;        The official guide to SUSE container-related products and technologies.&#10;     "/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Container guide"/>
<meta name="twitter:description" content="The official guide to SUSE container-related products and technologies."/>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml"/></head><body class="draft single normal offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="#container-guide">Container guide</a></div></div><main id="_content"><nav class="side-toc placebo" id="_side-toc-overall"> </nav><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="article" id="container-guide" data-id-title="Container guide"><div class="titlepage"><div><div><h1 class="title">Container guide</h1></div><div class="date"><span class="imprint-label">Publication Date: </span>24 Oct 2023</div><div><div class="abstract"><p>
          The following guide covers the SUSE Linux Enterprise Server container
          ecosystem. Since containers are a constantly evolving technology, the
          guide is regularly updated, expanded and improved to reflect the
          latest technological developments.
        </p></div></div><div><div class="titlepage-revhistory"><a aria-label="Revision History" hreflang="en" href="rh-id1340.html" target="_blank">Changelog</a></div></div></div></div><section xml:lang="en" class="sect1" id="container-basics" data-id-title="Introduction to Linux containers"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1 </span><span class="title-name">Introduction to Linux containers</span></span> <a title="Permalink" class="permalink" href="#container-basics">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Linux containers offer a lightweight virtualization method to run multiple
    isolated virtual environments simultaneously on a single host. This
    technology is based on the Linux kernel's namespaces for process isolation
    and kernel control groups (cgroups) for resource (CPU, memory, disk I/O,
    network, etc.) management.
  </p><p>
    Unlike Xen and KVM, where a full guest operating system is executed
    through a virtualization layer, Linux containers share and directly use the
    host OS kernel.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.2.4.1"><span class="term">Advantages of using containers</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
              <span class="strong"><strong>Size</strong></span>: Container images should
              only include the content needed to run an application, whereas a
              virtual machine includes an entire operating system,
            </p></li><li class="listitem"><p>
              <span class="strong"><strong>Performance</strong></span>: Containers
              provide near-native performance, as the kernel overhead is lower
              compared to virtualization and emulation.
            </p></li><li class="listitem"><p>
              <span class="strong"><strong>Security</strong></span>: Containers make it
              possible to isolate applications into self-contained units,
              separated from the rest of the host system.
            </p></li><li class="listitem"><p>
              <span class="strong"><strong>Resources management</strong></span>: It is
              possible to granularly control CPU, memory, disk I/O, network
              interfaces, etc. inside containers (via cgroups).
            </p></li><li class="listitem"><p>
              <span class="strong"><strong>Flexibility</strong></span>: Container images
              hold all necessary libraries, dependencies, and files needed to
              run an application, thus can be easily developed and deployed on
              multiple hosts.
            </p></li></ul></div></dd><dt id="id-1.2.4.2"><span class="term">Limitations of containers</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
              Containers share the host system's kernel, so the containers have
              to use the specific kernel version provided by the host.
            </p></li><li class="listitem"><p>
              Only Linux-based applications can be containerized on a Linux
              host.
            </p></li><li class="listitem"><p>
              A container encapsulates binaries for a specific architecture
              (AMD64/Intel 64 or AArch64 for instance). So a container made for
              AMD64/Intel 64 only runs on a AMD64/Intel 64 system host without the use of
              emulation.
            </p></li><li class="listitem"><p>
              Containers in themselves are no more secure than executing
              binaries outside of a container, and the overall security of
              containers depends on the host system. While containerized
              applications can be secured through AppArmor or SELinux profiles,
              container security requires putting in place tools and policies
              that ensure security of the container infrastructure and
              applications.
            </p></li></ul></div></dd></dl></div><section class="sect2" id="sec-concepts-workflow" data-id-title="Key concepts and introduction to Podman"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.1 </span><span class="title-name">Key concepts and introduction to Podman</span></span> <a title="Permalink" class="permalink" href="#sec-concepts-workflow">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Although Docker Open Source Engine is a popular choice for working with images and
      containers, Podman provides a drop-in replacement for Docker that
      offers several advantages. While <a class="xref" href="#container-podman" title="13. Podman overview">Section 13, “Podman overview”</a>
      provides more information on Podman, this chapter offers a quick
      introduction to key concepts and a basic procedure for creating a
      container image and using Podman to run a container.
    </p><p>
      The basic Podman workflow is as follows:
    </p><div class="informalfigure"><div class="mediaobject"><a href="images/container-workflow.svg"><img src="images/container-workflow.svg" width="80.0%" alt="image" title="image"/></a></div></div><p>
      Running a container, either on a local machine or in a cloud service,
      normally involves the following steps:
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          Fetch a base image by pulling it from a registry to your local
          machine.
        </p></li><li class="listitem"><p>
          Create a <code class="literal">Dockerfile</code> and use it to build a custom
          image on top of the base image.
        </p></li><li class="listitem"><p>
          Use the created image to start one or more containers.
        </p></li></ol></div><p>
      To run a container, you need an image. An image includes all dependencies
      needed to run the application. For example, the SLE BCI-Base image
      contains the SLE distribution with a minimal package selection.
    </p><p>
      While it is possible to create an image from scratch, few applications
      would work in such an empty environment. Thus, using an existing base
      image is more practical in most situations. A base image has no parent,
      meaning it is not based on another image.
    </p><p>
      Although you can use a base image for running containers, the main
      purpose of base images is to serve as foundations for creating custom
      images that can run containers with specific applications, servers,
      services, and so on.
    </p><p>
      Both base and custom images are available through a repository of images
      called a registry. Unless a registry is explicitly specified, Podman
      pulls images from the
      <a class="link" href="https://registry.opensuse.org" target="_blank">openSUSE</a> and
      <a class="link" href="https://docker.io" target="_blank">Docker Hub</a> registry. While
      you can fetch a base image manually, Podman can do that automatically
      when building a custom image.
    </p><p>
      To build a custom image, you must create a special file called a
      <code class="filename">Containerfile</code> or <code class="filename">Dockerfile</code>
      containing building instructions. For example, a
      <code class="filename">Dockerfile</code> can contain instructions to update the
      system software, install the desired application, open specific network
      ports, run commands, etc.
    </p><div class="informalfigure"><div class="mediaobject"><a href="images/container-image-layers.svg"><img src="images/container-image-layers.svg" width="80.0%" alt="image" title="image"/></a></div></div><p>
      You can build images not only from base images, but also on top of custom
      images. So you can have an image consisting of multiple layers. Please
      refer to <a class="xref" href="#container-build-images" title="18. Creating custom container images">Section 18, “Creating custom container images”</a> for more information.
    </p></section></section><section xml:lang="en" class="sect1" id="container-tools" data-id-title="Tools for building images and managing containers"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2 </span><span class="title-name">Tools for building images and managing containers</span></span> <a title="Permalink" class="permalink" href="#container-tools">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    All described tools described below are part of the
    <span class="strong"><strong>SUSE Linux Enterprise Server <span class="phrase"/> Containers
    Module</strong></span>, except the
    <a class="link" href="https://openbuildservice.org" target="_blank">Open Build Service</a>.
    You can see the full list of packages in the
    <span class="strong"><strong>Containers Module</strong></span> in the
    <a class="link" href="https://scc.suse.com/packages" target="_blank">SUSE Customer
    Center</a>.
  </p><section class="sect2" id="sec-tools-suse-registry" data-id-title="SUSE Registry"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.1 </span><span class="title-name">SUSE Registry</span></span> <a title="Permalink" class="permalink" href="#sec-tools-suse-registry">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      <a class="link" href="https://registry.suse.com" target="_blank">https://registry.suse.com</a> is the
      official source of SLE Base Container Images. It contains tested, updated
      and certified SLE Base Container Images. All images in the SUSE Registry
      are regularly rebuilt to include updates and fixes. The SUSE Registry's
      Web user interface lists a subset of the available images: Base Container
      Images, Language Container Images, Application Container Images, SUSE Linux Enterprise Server Images, and Releases Out of General Support.
      The Web UI also provides additional information for each image, including
      release date, support level, size, digest of the images and packages
      inside the image.
    </p></section><section class="sect2" id="sec-tools-docker" data-id-title="Docker"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.2 </span><span class="title-name">Docker</span></span> <a title="Permalink" class="permalink" href="#sec-tools-docker">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Docker is a system for creating and managing containers. Its core is the
      <a class="link" href="https://github.com/moby/moby" target="_blank">Docker Open Source
      Engine—</a>a lightweight virtualization solution to run containers
      simultaneously on a single host. Docker containers are be built using
      Dockerfiles.
    </p></section><section class="sect2" id="sec-tools-podman" data-id-title="Podman"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.3 </span><span class="title-name">Podman</span></span> <a title="Permalink" class="permalink" href="#sec-tools-podman">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      <a class="link" href="https://podman.io" target="_blank">Podman</a> stands for Pod Manager
      tool. It is a daemonless container engine for developing, managing and
      running
      <a class="link" href="https://opencontainers.org/about/overview/" target="_blank">Open
      Container Initiative (OCI)</a> containers on a Linux system, and it
      offers a drop-in alternative for Docker. Podman is the recommended
      container runtime for SLES. For a general introduction to Podman, refer
      to
      <a class="xref" href="#container-podman" title="13. Podman overview">Section 13, “Podman overview”</a>.
    </p></section><section class="sect2" id="sec-tools-buildah" data-id-title="Buildah"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.4 </span><span class="title-name">Buildah</span></span> <a title="Permalink" class="permalink" href="#sec-tools-buildah">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      <a class="link" href="https://buildah.io" target="_blank">Buildah</a> is a utility for
      building OCI container images. It is a complementary tool to Podman. In
      fact, the <code class="command">podman build</code> command uses Buildah to
      perform container image builds. Buildah makes it possible to build
      images from scratch, from existing images, and using Dockerfiles. OCI
      images built using the Buildah command-line tool and the underlying
      OCI-based technologies (for example, <code class="literal">containers/image</code>
      and
      <code class="literal">containers/storage</code> ) are portable and can therefore
      run in a Docker Open Source Engine environment. For information on
      installing and using Buildah, refer to
      <a class="xref" href="#container-buildah" title="17. Buildah overview">Section 17, “Buildah overview”</a>.
    </p></section><section class="sect2" id="sec-tools-skopeo" data-id-title="skopeo"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.5 </span><span class="title-name">skopeo</span></span> <a title="Permalink" class="permalink" href="#sec-tools-skopeo">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      <a class="link" href="https://github.com/containers/skopeo" target="_blank">skopeo</a> is
      a command-line utility for managing, inspecting and signing container
      images and image repositories. skopeo can be used to inspect containers
      and repositories on remote and local container registries. skopeo can
      copy container images between different storage back-ends. skopeo is part
      of the <code class="literal">Basesystem Module</code> of SUSE Linux Enterprise Server.
    </p></section><section class="sect2" id="sec-tools-helm" data-id-title="Helm"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.6 </span><span class="title-name">Helm</span></span> <a title="Permalink" class="permalink" href="#sec-tools-helm">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      <a class="link" href="https://helm.sh" target="_blank">Helm</a> is the Kubernetes package
      manager, and it is the de-facto standard for deploying containerized
      applications on Kubernetes clusters using charts. Helm can be used to
      install, update and remove applications in a single or multiple
      containers. It can also handle the associated resources, such as
      configuration, storage volumes, etc. For instance, it is used for
      instance to deploy the RMT server (see
      <a class="link" href="https://documentation.suse.com/sles/15-SP4/single-html/SLES-rmt/index.html#sec-rmt-deploy-kubernetes" target="_blank">RMT
      documentation</a> for more information).
    </p></section><section class="sect2" id="sec-tools-distribution" data-id-title="Distribution"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.7 </span><span class="title-name">Distribution</span></span> <a title="Permalink" class="permalink" href="#sec-tools-distribution">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      <a class="link" href="https://github.com/distribution/distribution" target="_blank">Distribution</a>
      is an open-source registry implementation for storing and distributing
      container images using the OCI Distribution Specification. It provides a
      simple, secure and scalable base for building a large scale registry
      solution or running a simple private registry. Distribution can also
      mirror Docker Hub but
      <a class="link" href="https://docs.docker.com/registry/recipes/mirror/#gotcha" target="_blank">not
      any other private registry</a>.
    </p></section><section class="sect2" id="sec-tools-obs" data-id-title="Open Build Service"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.8 </span><span class="title-name">Open Build Service</span></span> <a title="Permalink" class="permalink" href="#sec-tools-obs">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The <a class="link" href="http://openbuildservice.org" target="_blank">Open Build Service
      (OBS)</a> provides free infrastructure for building and storing RPM
      packages including different container formats. The
      <a class="link" href="https://registry.opensuse.org" target="_blank">OBS Container
      Registry</a> provides a detailed listing of all container images built
      by the OBS, complete with commands for pulling the images into your local
      environment. The OBS
      <a class="link" href="https://build.opensuse.org/image_templates" target="_blank">openSUSEcontainer
      image templates</a> can be modified to specific needs, which offers
      the easiest way to create your own container branch. Container images can
      be built with Docker tools from an existing image using a
      <code class="filename">Dockerfile</code>. Alternatively, images can be built from
      scratch using the KIWI image-building solution.
    </p><p>
      Instructions on how to build images on OBS can be found in the following
      <a class="link" href="https://openbuildservice.org/2018/05/09/container-building-and-distribution/" target="_blank">blog post</a>.
    </p><p>
      SUSE Container Images, called SLE Base Container Images
      (SLE BCIs) are the only official container images. They are not available at
      <a class="link" href="https://build.opensuse.org" target="_blank">https://build.opensuse.org</a>,
      and the RPMs exported there are not identical to the internal ones. This
      means that it is not possible to build officially supported images at
      <a class="link" href="https://build.opensuse.org" target="_blank">https://build.opensuse.org</a>.
    </p><p>
      For more information about SLE BCIs, refer to
      <a class="xref" href="#container-bci-general" title="4. General-purpose SLE Base Container Images">Section 4, “General-purpose SLE Base Container Images”</a>
      .
    </p></section><section class="sect2" id="sec-tools-kiwi" data-id-title="KIWI"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">2.9 </span><span class="title-name">KIWI</span></span> <a title="Permalink" class="permalink" href="#sec-tools-kiwi">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      <a class="link" href="https://github.com/OSInside/kiwi" target="_blank">KIWI</a> Next
      Generation is a multi-purpose tool for building images. In addition to
      container images, regular installation ISO images, and images for virtual
      machines, KIWI can build images that boot via PXE or Vagrant boxes. The
      main building block in KIWI is an image XML description, a directory that
      includes the <code class="filename">config.xml</code> or <code class="filename">.kiwi</code>
      file along with scripts or configuration data. The process of creating
      images with KIWI is fully automated and does not require any user
      interaction. Any information required for the image creation process is
      provided by the primary configuration file <code class="filename">config.xml</code>.
      The image can be customized using the <code class="filename">config.sh</code> and
      <code class="filename">images.sh</code> scripts. KIWI is the core engine of
      <a class="link" href="http://openbuildservice.org" target="_blank">Open Build Service
      (OBS)</a>.
    </p><div id="id-1.3.11.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
        It is important to distinguish between KIWI NG (currently version
        9.20.9) and its unmaintained legacy versions (7.x.x or older), now
        called <a class="link" href="https://documentation.suse.com/kiwi/" target="_blank">KIWI
        Legacy</a>.
      </p></div><p>
      For information on how to install KIWI and use it to build
      images, see the <a class="link" href="http://osinside.github.io/kiwi/" target="_blank">KIWI
      documentation</a>. A collection of example image descriptions can be
      found on the
      <a class="link" href="https://github.com/OSInside/kiwi-descriptions" target="_blank">KIWI
      GitHub repository</a>.
    </p><p>
      KIWI's man pages provide information on using the tool. To access the man
      pages, install the <code class="literal">kiwi-man-pages</code> package.
    </p></section></section><section xml:lang="en" class="sect1" id="container-bci-intro" data-id-title="Introduction to SLE Base Container Images"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3 </span><span class="title-name">Introduction to SLE Base Container Images</span></span> <a title="Permalink" class="permalink" href="#container-bci-intro">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    SLE Base Container Images (SLE BCIs) are minimal SLES 15-based images that you can use to
    develop, deploy and share applications. There are two types of SLE BCIs:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        General-purpose SLE BCIs can be used for building custom container
        images and for deploying applications.
      </p></li><li class="listitem"><p>
        Language stack SLE BCIs provide minimal environments for developing and
        deploying applications in specific programming languages.
      </p></li></ul></div><p>
    SLE Base Container Images are available from the
    <a class="link" href="https://registry.suse.com" target="_blank">SUSE Registry</a>.
    It contains tested and updated SLE Base Container Images. All images in the SUSE Registry
    undergo a maintenance process. The images are built to contain the latest
    available updates and fixes. The SUSE Registry's Web user interface lists
    a subset of the available images. For information about the SUSE Registry,
    see <a class="xref" href="#sec-tools-suse-registry" title="2.1. SUSE Registry">Section 2.1, “SUSE Registry”</a>.
  </p><p>
    SLE base images in the SUSE Registry receive security updates and are
    covered by the SUSE support plans. For more information about these
    support plans, see <a class="xref" href="#container-support" title="21. Compatibility and support conditions">Section 21, “Compatibility and support conditions”</a>.
  </p><section class="sect2" id="sec-bci-why" data-id-title="Why SLE Base Container Images"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.1 </span><span class="title-name">Why SLE Base Container Images</span></span> <a title="Permalink" class="permalink" href="#sec-bci-why">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      SLE BCIs offer a platform for creating SLES-based custom container
      images and containerized applications that can be distributed freely.
      SLE BCIs feature the same predictable enterprise lifecycle as SLES. The
      SLE_BCI 15 SP3 and SP4 repository (which is a subset of the SLE
      repository) gives SLE BCIs access to 4000 packages available for the
      AMD64/Intel 64, AArch64, POWER, and IBM Z architectures. The packages in
      the repository have undergone quality assurance and security audits by
      SUSE. The container images are FIPS-compliant when running on a host in
      FIPS mode. In addition to that, SUSE can provide official support for
      SLE BCIs through SUSE subscription plans.
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.6.3.1"><span class="term">Security</span></dt><dd><p>
            Each package in the SLE_BCI repository undergoes security audits,
            and SLE BCIs benefit from the same mechanism of dealing with CVEs as
            SUSE Linux Enterprise Server. All discovered and fixed
            vulnerabilities are announced via e-mail, the dedicated
            <a class="link" href="https://www.suse.com/security/cve/" target="_blank">CVE
            pages</a>, and as OVAL and CVRF data. To ensure a secure supply
            chain, all container images are signed with Notary v1, Podman's GPG
            signatures, and Sigstore Cosign.
          </p></dd><dt id="id-1.4.6.3.2"><span class="term">Stability</span></dt><dd><p>
            Since SLE BCIs are based on SLES, they feature the same level of
            stability and quality assurance. Similar to SLES, SLE BCIs receive
            maintenance updates that provide bug fixes, improvements and
            security patches.
          </p></dd><dt id="id-1.4.6.3.3"><span class="term">Tooling and integration</span></dt><dd><p>
            SLE BCIs are designed to provide drop-in replacements for popular
            container images available on hub.docker.com. You can use the
            general-purpose SLE BCIs and the tools they put at your disposal to
            create custom container images, while the language stack SLE BCIs
            provide a foundation and the required tooling for building
            containerized applications.
          </p></dd><dt id="id-1.4.6.3.4"><span class="term">Redistribution</span></dt><dd><p>
            SLE Base Container Images are covered by a permissive
            <a class="link" href="https://www.suse.com/de-de/licensing/eula/#bci" target="_blank">EULA</a>
            that allows you to redistribute custom container images based on a
            SLE Base Container Image.
          </p></dd></dl></div></section><section class="sect2" id="sec-bci-highlights" data-id-title="Highlights"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.2 </span><span class="title-name">Highlights</span></span> <a title="Permalink" class="permalink" href="#sec-bci-highlights">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          SLE BCIs are fully compatible with SLES, but
          <span class="strong"><strong>they do not require a subscription to run and
          distribute them.</strong></span>
        </p></li><li class="listitem"><p>
          SLE BCIs automatically run in FIPS-compatible mode when the host
          operating system is running in FIPS mode.
        </p></li><li class="listitem"><p>
          Each SLE BCI includes the RPM database, which makes it possible to
          audit the contents of the container image. You can use the RPM
          database to determine the specific version of the RPM package any
          given file belongs to. This allows you to ensure that a container
          image is not susceptible to known and already fixed vulnerabilities.
        </p></li><li class="listitem"><p>
          All SLE BCIs (except for those without Zypper) come with the
          <code class="literal">container-suseconnect</code> service. This gives
          containers that run on a registered SLES host access to the full
          SLES repositories. <code class="literal">container-suseconnect</code> is
          invoked automatically when you run Zypper for the first time, and
          the service adds the correct SLES repositories into the running
          container. On an unregistered SLES host or on a non-SLES host,
          the service does nothing. See
          <a class="xref" href="#sec-bci-suseconnect" title="10.2. Using container-suseconnect with SLE BCIs">Section 10.2, “Using container-suseconnect with SLE BCIs”</a> for more information.
        </p></li></ul></div><div id="id-1.4.7.3" data-id-title="SLE_BCI repository" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: SLE_BCI repository</div><p>
        There is a SLE_BCI repository for each SLE service pack. This means
        that SLE BCIs based on SP4 have access to the SLE_BCI repository for
        SP4, all SLE BCIs based on SP5 use the SLE_BCI repository for SP5, and
        so on. Each SLE_BCI repository contains all SLE packages except
        kernels, boot loaders, installers (including YaST), desktop
        environments and hypervisors (such as KVM and Xen).
      </p></div><div id="id-1.4.7.4" data-id-title="Requesting a missing package" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Requesting a missing package</div><p>
        If the SLE_BCI repository does not have a package you need, you have
        two options. As an existing SUSE customer, you can file a feature
        request. As a regular user, you can request a package to be created by
        creating an issue in
        <a class="link" href="https://bugzilla.suse.com/enter_bug.cgi?product=SUSE%20Linux%20Enterprise%20Base%20Container%20Images" target="_blank">Bugzilla</a>.
      </p></div></section></section><section xml:lang="en" class="sect1" id="container-bci-general" data-id-title="General-purpose SLE Base Container Images"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4 </span><span class="title-name">General-purpose SLE Base Container Images</span></span> <a title="Permalink" class="permalink" href="#container-bci-general">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    There are four general-purpose SLE BCIs, and each container image comes with
    a minimum set of packages to keep its size low. You can use a
    general-purpose SLE BCI either as a starting point for building custom
    container images, or as a platform for deploying specific software.
  </p><p>
    SUSE offers several general-purpose SLE BCIs that are intended as
    deployment targets or as foundations for creating customized images:
    SLE BCI-Base, SLE BCI-Minimal, SLE BCI-Micro and SLE BCI-BusyBox. These images
    share the common SLES base, and none of them ship with a specific
    language or an application stack. All images feature the RPM database (even
    if the specific image does not include the RPM package manager) that can be
    used to verify the provenance of every file in the image. Each image
    includes the SLES certificate bundle, which allows the deployed
    applications to use the system's certificates to verify TLS connections.
  </p><p>
    The table below provides a quick overview of the differences between
    SLE BCI-Base, SLE BCI-Minimal, SLE BCI-Micro and SLE BCI-BusyBox.
  </p><div class="table" id="id-1.5.5" data-id-title="Support matrix"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 1: </span><span class="title-name">Support matrix </span></span><a title="Permalink" class="permalink" href="#id-1.5.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/><col class="col_4"/><col class="col_5"/></colgroup><thead><tr><th style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">Features</th><th style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">SLE BCI-Base</th><th style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">SLE BCI-Minimal</th><th style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">SLE BCI-Micro</th><th style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">SLE BCI-BusyBox</th></tr></thead><tbody><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              glibc
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td></tr><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              CA certificates
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td></tr><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              rpm database
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td></tr><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              coreutils
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">
            <p>
              busybox
            </p>
          </td></tr><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              bash
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">
            <p>
              ╳
            </p>
          </td></tr><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              rpm (binary)
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
            <p>
              ╳
            </p>
          </td><td style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">
            <p>
              ╳
            </p>
          </td></tr><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; ">
            <p>
              zypper
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; ">
            <p>
              ✓
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; ">
            <p>
              ╳
            </p>
          </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; ">
            <p>
              ╳
            </p>
          </td><td style="text-align: center; vertical-align: top; ">
            <p>
              ╳
            </p>
          </td></tr></tbody></table></div></div><section class="sect2" id="id-sle-bci-base-and-sle-bci-init-when-you-need-flexibility" data-id-title="SLE BCI-Base and SLE BCI-Init: When you need flexibility"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.1 </span><span class="title-name">SLE BCI-Base and SLE BCI-Init: When you need flexibility</span></span> <a title="Permalink" class="permalink" href="#id-sle-bci-base-and-sle-bci-init-when-you-need-flexibility">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      This SLE BCI comes with the Zypper package manager and the free SLE_BCI
      repository. This allows you to install software available in the
      repository and customize the image during the build. The downside is the
      size of the image. It is the largest of the general-purpose SLE BCIs, so
      it is not always the best choice for a deployment image.
    </p><p>
      A variant of SLE BCI-Base called SLE BCI-Init comes with systemd
      preinstalled. The SLE BCI-Init container image can be useful in scenarios
      requiring systemd for managing services in a single container.
    </p><div id="id-1.5.6.4" data-id-title="Using SLE BCI-init with Docker" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Using SLE BCI-init with Docker</div><p>
        When using SLE BCI-init container with Docker, you must use the
        following arguments for <code class="systemitem">systemd</code> to work correctly in the container:
      </p><div class="verbatim-wrap"><pre class="screen">&gt; docker run -ti --tmpfs /run -v /sys/fs/cgroup:/sys/fs/cgroup:rw --cgroupns=host registry.suse.com/bci/bci-init:latest</pre></div><p>
        To correctly shut down the container, use the following command:
      </p><div class="verbatim-wrap"><pre class="screen">&gt; docker kill -s SIGRTMIN+3 <em class="replaceable">CONTAINER_ID</em></pre></div></div></section><section class="sect2" id="id-sle-bci-minimal-when-you-do-not-need-zypper" data-id-title="SLE BCI-Minimal: When you do not need Zypper"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.2 </span><span class="title-name">SLE BCI-Minimal: When you do not need Zypper</span></span> <a title="Permalink" class="permalink" href="#id-sle-bci-minimal-when-you-do-not-need-zypper">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      This is a stripped-down version of the SLE BCI-Base image. SLE BCI-Minimal
      comes without Zypper, but it does have the RPM package manager
      installed. This significantly reduces the size of the image. However,
      while RPM can install and remove packages, it lacks support for
      repositories and automated dependency resolution. The SLE BCI-Minimal
      image is therefore intended for creating deployment containers, and then
      installing the desired RPM packages inside the containers. Although you
      can install the required dependencies, you need to download and resolve
      them manually. However, this approach is not recommended as it is prone
      to errors.
    </p></section><section class="sect2" id="sec-bci-variants-micro" data-id-title="SLE BCI-Micro: When you need to deploy static binaries"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.3 </span><span class="title-name">SLE BCI-Micro: When you need to deploy static binaries</span></span> <a title="Permalink" class="permalink" href="#sec-bci-variants-micro">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      This image is similar to SLE BCI-Minimal but without the RPM package
      manager. The primary use case for the image is deploying static binaries
      produced externally or during multi-stage builds. As there is no
      straightforward way to install additional dependencies inside the
      container image, we recommend deploying a project using the
      SLE BCI-Minimal image only when the final build artifact bundles all
      dependencies and has no external runtime requirements (like Python or
      Ruby).
    </p></section><section class="sect2" id="sec-bci-variants-busybox" data-id-title="SLE BCI-BusyBox: When you need the smallest and GPLv3-free image"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.4 </span><span class="title-name">SLE BCI-BusyBox: When you need the smallest and GPLv3-free image</span></span> <a title="Permalink" class="permalink" href="#sec-bci-variants-busybox">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Similar to SLE BCI-Micro, the SLE BCI-BusyBox image comes with the most
      basic tools only. However, these tools are provided by the BusyBox
      project. This has the benefit of further size reduction. Furthermore, the
      image contains no GPLv3 licensed software. When using the image, keep in
      mind that there are certain differences between the BusyBox tools and the
      GNU Coreutils. So scripts written for a system that uses GNU Coreutils
      may require modification to work with BusyBox.
    </p></section><section class="sect2" id="sec-bci-variants-size" data-id-title="Approximate sizes"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">4.5 </span><span class="title-name">Approximate sizes</span></span> <a title="Permalink" class="permalink" href="#sec-bci-variants-size">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      For your reference, the list below provides an approximate size of each
      SLE BCI. Keep in mind that the provided numbers are rough estimations.
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          <code class="literal">SLE BCI-Base</code> ~94 MB
        </p></li><li class="listitem"><p>
          <code class="literal">SLE BCI-Minimal</code> ~42 MB
        </p></li><li class="listitem"><p>
          <code class="literal">SLE BCI-Micro</code> ~26 MB
        </p></li><li class="listitem"><p>
          <code class="literal">SLE BCI-BusyBox</code> ~14 MB
        </p></li></ul></div></section></section><section xml:lang="en" class="sect1" id="container-bci-language" data-id-title="Language stack SLE Base Container Images"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5 </span><span class="title-name">Language stack SLE Base Container Images</span></span> <a title="Permalink" class="permalink" href="#container-bci-language">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Language stack SLE BCIs are built on top of the SLE BCI-Base. Each container
    image comes with the Zypper stack and the free
    <code class="literal">SLE_BCI</code> repository. Additionally, each image includes
    most common tools for building and deploying applications in the specific
    language environment. This includes tools like a compiler or interpreter as
    well as the language specific package manager.
  </p><p>
    Below is an overview of the language stack SLE BCIs available in the
    <a class="link" href="https://registry.suse.com" target="_blank">SUSE Registry</a>.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.6.4.1"><span class="term">python</span></dt><dd><p>
          Ships with the python3 version from the tag and pip3, curl, git
          tools.
        </p></dd><dt id="id-1.6.4.2"><span class="term">node</span></dt><dd><p>
          Comes with nodejs version from the tag, npm and git. The yarn package
          manager can be installed with the <code class="literal">npm install -g
          yarn</code> command.
        </p></dd><dt id="id-1.6.4.3"><span class="term">openjdk</span></dt><dd><p>
          Ships with the OpenJDK runtime. Designed for deploying Java
          applications.
        </p></dd><dt id="id-1.6.4.4"><span class="term">openjdk-devel</span></dt><dd><p>
          Includes the development part of OpenJDK in addition to the OpenJDK
          runtime. Instead of Bash, the default entry point is the jshell
          shell.
        </p></dd><dt id="id-1.6.4.5"><span class="term">ruby</span></dt><dd><p>
          A standard development environment based on Ruby 2.5, featuring ruby,
          gem and bundler as well as git and curl.
        </p></dd><dt id="id-1.6.4.6"><span class="term">rust</span></dt><dd><p>
          Ships with the Rust compiler and the Cargo package manager.
        </p></dd><dt id="id-1.6.4.7"><span class="term">golang</span></dt><dd><p>
          Ships with the go compiler version specified in the tag.
        </p></dd><dt id="id-1.6.4.8"><span class="term">dotnet-runtime</span></dt><dd><p>
          Includes the .NET runtime from Microsoft and the Microsoft .NET
          repository.
        </p></dd><dt id="id-1.6.4.9"><span class="term">dotnet-aspnet</span></dt><dd><p>
          Ships with the ASP.NET runtime from Microsoft and the Microsoft .NET
          repository.
        </p></dd><dt id="id-1.6.4.10"><span class="term">dotnet-sdk</span></dt><dd><p>
          Comes with the .NET and ASP.NET SDK from Microsoft as well as the
          Microsoft .NET repository.
        </p></dd></dl></div></section><section xml:lang="en" class="sect1" id="container-bci-app" data-id-title="Application SLE Base Container Images"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6 </span><span class="title-name">Application SLE Base Container Images</span></span> <a title="Permalink" class="permalink" href="#container-bci-app">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Application SLE BCIs are SLE BCI-Base container images that include specific
    applications, such as the PostgreSQL database and the Performance Co-Pilot
    a system-level performance analysis toolkit. Application SLE BCIs are
    available in the dedicated section of the
    <a class="link" href="https://registry.suse.com/#apps" target="_blank">SUSE Registry</a>.
  </p></section><section xml:lang="en" class="sect1" id="container-bci-lifecycle" data-id-title="Important note on status and lifecycle SLE Base Container Images"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7 </span><span class="title-name">Important note on status and lifecycle SLE Base Container Images</span></span> <a title="Permalink" class="permalink" href="#container-bci-lifecycle">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    All container images, except for base, are currently classified as tech
    preview, and SUSE does not provide official support for them. This
    information is visible on the web on
    <a class="link" href="https://registry.suse.com" target="_blank">registry.suse.com</a>. It
    is also indicated via the <code class="literal">com.suse.supportlevel</code> label
    whether a container image still has the tech preview status. You can use
    the skopeo and jq utilities to check the status of the desired SLE BCI as
    follows:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>skopeo inspect docker://registry.suse.com/bci/bci-micro:15.4 | jq '.Labels["com.suse.supportlevel"]'
    "techpreview"
    
    <code class="prompt user">&gt; </code>skopeo inspect docker://registry.suse.com/bci/bci-base:15.4 | jq '.Labels["com.suse.supportlevel"]'
    "l3"</pre></div><p>
    In the example above, the <code class="literal">com.suse.supportlevel</code> label is
    set to <code class="literal">techpreview</code> in the <code class="literal">bci-micro</code>
    container image, indicating that the image still has the tech preview
    status. The <code class="literal">bci-base</code> container image, on the other hand,
    has full L3 support. Unlike like the general purpose SLE BCIs, the language
    stack SLE BCIs may not follow the lifecycle of the SLES distribution: they
    are supported as long as the respective language stack receives support. In
    other words, new versions of SLE BCIs (indicated by the OCI tags) may be
    released during the lifecycle of a SLES Service Pack, while older
    versions may become unsupported. Refer to
    <a class="link" href="https://suse.com/lifecycle" target="_blank">https://suse.com/lifecycle</a> to find out whether the
    container in question is still under support.
  </p><div id="id-1.8.5" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important</div><p>
      A SLE Base Container Image is no longer updated after its support period ends. You will not
      receive any notification when that happens.
    </p></div></section><section xml:lang="en" class="sect1" id="container-bci-labels" data-id-title="SLE Base Container Image labels"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">8 </span><span class="title-name">SLE Base Container Image labels</span></span> <a title="Permalink" class="permalink" href="#container-bci-labels">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    SLE BCIs feature the following labels.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.9.3.1"><span class="term">com.suse.image-type</span></dt><dd><p>
          Shows whether this is a pure SLE BCI or an application container based
          on another SLE BCI.
        </p></dd><dt id="id-1.9.3.2"><span class="term">com.suse.eula</span></dt><dd><p>
          Marks which section of the SUSE EULA applies to the container
          image.
        </p></dd><dt id="id-1.9.3.3"><span class="term">com.suse.release-stage</span></dt><dd><p>
          Indicates the current release stage of the image.
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
              <code class="literal">prototype</code> Indicates that the container image
              is in the ALP prototype phase.
            </p></li><li class="listitem"><p>
              <code class="literal">alpha</code> Prevents the container image from
              appearing in the registry.suse.com Web interface even if it is
              available there. The value also indicates the alpha quality of
              the container image.
            </p></li><li class="listitem"><p>
              <code class="literal">beta</code> Lists the container image in the Beta
              Container Images section of the registry.suse.com Web interface
              and adds the Beta label to the image. The value also indicates
              the beta quality of the container image.
            </p></li><li class="listitem"><p>
              <code class="literal">released</code> Indicates that the container image is
              released and suitable for production use.
            </p></li></ul></div></dd><dt id="id-1.9.3.4"><span class="term">com.suse.supportlevel</span></dt><dd><p>
          Shows the support level for the container.
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
              <code class="literal">l2</code> Problem isolation, which means technical
              support designed to analyze data, reproduce customer problems,
              isolate problem areas, and provide a resolution for problems not
              resolved by Level 1, or prepare for Level 3.
            </p></li><li class="listitem"><p>
              <code class="literal">l3</code> Problem resolution, which means technical
              support designed to resolve problems by engaging engineering to
              resolve product defects which have been identified by Level 2
              Support.
            </p></li><li class="listitem"><p>
              <code class="literal">acc</code> Software delivered with the SLE Base Container Image may
              require an external contract.
            </p></li><li class="listitem"><p>
              <code class="literal">techpreview</code> The image is unsupported and
              intended for use in proof-of-concept scenarios.
            </p></li><li class="listitem"><p>
              <code class="literal">unsupported</code> No support is provided for the
              image.
            </p></li></ul></div></dd><dt id="id-1.9.3.5"><span class="term">com.suse.lifecycle-url</span></dt><dd><p>
          Points to the
          <a class="link" href="https://www.suse.com/lifecycle/" target="_blank">https://www.suse.com/lifecycle/</a>
          page that offers information about the lifecycle of the image.
        </p></dd></dl></div><section class="sect2" id="sec-bci-labels-query" data-id-title="Working with SLE BCI labels"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">8.1 </span><span class="title-name">Working with SLE BCI labels</span></span> <a title="Permalink" class="permalink" href="#sec-bci-labels-query">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      All SLE Base Container Images include information such as a build time stamp and
      description. This information is provided in the form of labels attached
      to the base images, and is therefore available for derived images and
      containers.
    </p><p>
      Here is an example of the labels information shown by <code class="literal">podman
      inspect</code>:
    </p><div class="verbatim-wrap"><pre class="screen">podman inspect registry.suse.com/suse/sle15
    [...]
    "Labels": {
                "com.suse.bci.base.created": "2023-01-26T22:15:08.381030307Z",
                "com.suse.bci.base.description": "Image for containers based on SUSE Linux Enterprise Server 15 SP4.",
                "com.suse.bci.base.disturl": "obs://build.suse.de/SUSE:SLE-15-SP4:Update:CR/images/1477b070ae019f95b0f2c3c0dce13daf-sles15-image",
                "com.suse.bci.base.eula": "sle-bci",
                "com.suse.bci.base.image-type": "sle-bci",
                "com.suse.bci.base.lifecycle-url": "https://www.suse.com/lifecycle",
                "com.suse.bci.base.reference": "registry.suse.com/suse/sle15:15.4.27.14.31",
                "com.suse.bci.base.release-stage": "released",
                "com.suse.bci.base.source": "https://sources.suse.com/SUSE:SLE-15-SP4:Update:CR/sles15-image/1477b070ae019f95b0f2c3c0dce13daf/",
                "com.suse.bci.base.supportlevel": "l3",
                "com.suse.bci.base.title": "SLE 15 SP4 Base Container Image",
                "com.suse.bci.base.url": "https://www.suse.com/products/server/",
                "com.suse.bci.base.vendor": "SUSE LLC",
                "com.suse.bci.base.version": "15.4.27.14.31",
                "com.suse.eula": "sle-bci",
                "com.suse.image-type": "sle-bci",
                "com.suse.lifecycle-url": "https://www.suse.com/lifecycle",
                "com.suse.release-stage": "released",
                "com.suse.sle.base.created": "2023-01-26T22:15:08.381030307Z",
                "com.suse.sle.base.description": "Image for containers based on SUSE Linux Enterprise Server 15 SP4.",
                "com.suse.sle.base.disturl": "obs://build.suse.de/SUSE:SLE-15-SP4:Update:CR/images/1477b070ae019f95b0f2c3c0dce13daf-sles15-image",
                "com.suse.sle.base.eula": "sle-bci",
                "com.suse.sle.base.image-type": "sle-bci",
                "com.suse.sle.base.lifecycle-url": "https://www.suse.com/lifecycle",
                "com.suse.sle.base.reference": "registry.suse.com/suse/sle15:15.4.27.14.31",
                "com.suse.sle.base.release-stage": "released",
                "com.suse.sle.base.source": "https://sources.suse.com/SUSE:SLE-15-SP4:Update:CR/sles15-image/1477b070ae019f95b0f2c3c0dce13daf/",
                "com.suse.sle.base.supportlevel": "l3",
                "com.suse.sle.base.title": "SLE 15 SP4 Base Container Image",
                "com.suse.sle.base.url": "https://www.suse.com/products/server/",
                "com.suse.sle.base.vendor": "SUSE LLC",
                "com.suse.sle.base.version": "15.4.27.14.31",
                "com.suse.supportlevel": "l3",
                "org.openbuildservice.disturl": "obs://build.suse.de/SUSE:SLE-15-SP4:Update:CR/images/1477b070ae019f95b0f2c3c0dce13daf-sles15-image",
                "org.opencontainers.image.created": "2023-01-26T22:15:08.381030307Z",
                "org.opencontainers.image.description": "Image for containers based on SUSE Linux Enterprise Server 15 SP4.",
                "org.opencontainers.image.source": "https://sources.suse.com/SUSE:SLE-15-SP4:Update:CR/sles15-image/1477b070ae019f95b0f2c3c0dce13daf/",
                "org.opencontainers.image.title": "SLE 15 SP4 Base Container Image",
                "org.opencontainers.image.url": "https://www.suse.com/products/server/",
                "org.opencontainers.image.vendor": "SUSE LLC",
                "org.opencontainers.image.version": "15.4.27.14.31",
                "org.opensuse.reference": "registry.suse.com/suse/sle15:15.4.27.14.31"
            },
    [...]</pre></div><p>
      All labels are shown twice to ensure that the information in derived
      images about the original base image is still visible and not
      overwritten.
    </p><p>
      Use Podman to retrieve labels of a local image. The following command
      lists all labels and only the labels information of the
      <span class="package">bci-base:15.5</span> image:
    </p><div class="verbatim-wrap"><pre class="screen">podman inspect -f {{.Labels | json}} registry.suse.com/bci/bci-base:15.5</pre></div><p>
      It is also possible to retrieve the value of a specific label:
    </p><div class="verbatim-wrap"><pre class="screen">podman inspect -f {{ index .Labels \"com.suse.sle.base.supportlevel\" }} registry.suse.com/bci/bci-base:15.5</pre></div><p>
      The preceding command retrieves the value of the
      <code class="literal">com.suse.sle.base.supportlevel</code> label.
    </p><p>
      The skopeo tool makes it possible to examine labels of an image without
      pulling it first. For example:
    </p><div class="verbatim-wrap"><pre class="screen">skopeo inspect -f {{.Labels | json}} docker://registry.suse.com/bci/bci-base:15.5
skopeo inspect -f {{ index .Labels \"com.suse.sle.base.supportlevel\" }} docker://registry.suse.com/bci/bci-base:15.5</pre></div></section></section><section xml:lang="en" class="sect1" id="container-bci-tags" data-id-title="SLE BCI tags"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">9 </span><span class="title-name">SLE BCI tags</span></span> <a title="Permalink" class="permalink" href="#container-bci-tags">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Tags are used to refer to images. A tag forms a part of the image's name.
    Unlike labels, tags can be freely defined, and they are usually used to
    indicate a version number.
  </p><p>
    If a tag exists in multiple images, the newest image is used. The image
    maintainer decides which tags to assign to the container image.
  </p><p>
    The conventional tag format is <code class="literal">repository name</code>:
    <code class="literal">image version specification</code> (usually version number).
    For example, the tag for the latest published image of SLE 15 SP2 would
    be <code class="literal">suse/sle15:15.2</code>.
  </p></section><section xml:lang="en" class="sect1" id="container-bci-understand" data-id-title="Understanding SLE BCIs"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10 </span><span class="title-name">Understanding SLE BCIs</span></span> <a title="Permalink" class="permalink" href="#container-bci-understand">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    There are certain features that set SLE BCIs apart from similar offerings,
    like images based on Debian or Alpine Linux. Understanding the specifics
    can help you to get the most out of SLE BCIs in the shortest time possible.
  </p><section class="sect2" id="sec-bci-package-manager" data-id-title="Package manager"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.1 </span><span class="title-name">Package manager</span></span> <a title="Permalink" class="permalink" href="#sec-bci-package-manager">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The default package manager in SLES is Zypper. Similar to APT in
      Debian and APK in Alpine Linux, Zypper offers a command-line interface
      for all package management tasks. Below is a brief overview of commonly
      used container-related Zypper commands.
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.11.3.3.1"><span class="term">Install packages</span></dt><dd><p>
            <code class="command">zypper --non-interactive install
            <em class="replaceable">PACKAGE_NAME</em></code>
          </p></dd><dt id="id-1.11.3.3.2"><span class="term">Add a repository</span></dt><dd><p>
            <code class="command">zypper --non-interactive addrepo
            <em class="replaceable">REPOSITORY_URL</em>;</code>
            <code class="command">zypper --non-interactive refresh</code>
          </p></dd><dt id="id-1.11.3.3.3"><span class="term">Update all packages</span></dt><dd><p>
            <code class="command">zypper --non-interactive update</code>
          </p></dd><dt id="id-1.11.3.3.4"><span class="term">Remove a package</span></dt><dd><p>
            <code class="command">zypper --non-interactive remove --clean-deps
            <em class="replaceable">PACKAGE_NAME</em></code> (the
            <code class="option">--clean-deps</code> flag ensures that no longer required
            dependencies are removed as well)
          </p></dd><dt id="id-1.11.3.3.5"><span class="term">Clean up temporary files</span></dt><dd><p>
            <code class="command">zypper clean</code>
          </p></dd></dl></div><p>
      For more information on using Zypper, refer to
      <a class="link" href="https://documentation.suse.com/sles/html/SLES-all/cha-sw-cl.html#sec-zypper" target="_blank">https://documentation.suse.com/sles/html/SLES-all/cha-sw-cl.html#sec-zypper</a>.
    </p><p>
      All the described commands use the <code class="option">--non-interactive</code>
      flag to skip confirmations, since you cannot approve these manually
      during container builds. Keep in mind that you must use the flag with any
      command that modifies the system. Also note that
      <code class="option">--non-interactive</code> is not a "yes to all" flag. Instead,
      <code class="option">--non-interactive</code> confirms what is considered to be the
      intention of the user. For example, an installation command with the
      <code class="option">--non-interactive</code> option fails if it needs to import new
      repository signing keys, as that is something that the user must verify
      themselves.
    </p></section><section class="sect2" id="sec-bci-suseconnect" data-id-title="Using container-suseconnect with SLE BCIs"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.2 </span><span class="title-name">Using container-suseconnect with SLE BCIs</span></span> <a title="Permalink" class="permalink" href="#sec-bci-suseconnect">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      <a class="link" href="https://github.com/SUSE/container-suseconnect" target="_blank"><code class="literal">container-suseconnect</code></a>
      is a plugin available in all SLE BCIs that ship with Zypper. When the
      plugin detects the host's SUSE Linux Enterprise Server registration
      credentials, it uses them to give the container access the SUSE Linux
      Enterprise repositories. This includes additional modules and previous
      package versions that are not part of the free SLE_BCI repository. Refer
      to <a class="xref" href="#sec-container-suseconnect" title="12.3. container-suseconnect">Section 12.3, “container-suseconnect”</a> for more information on
      how to use the repository for SLES, openSUSE, and non-SLES hosts.
    </p></section><section class="sect2" id="sec-bci-tasks" data-id-title="Common patterns"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.3 </span><span class="title-name">Common patterns</span></span> <a title="Permalink" class="permalink" href="#sec-bci-tasks">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The following examples demonstrate how to accomplish certain tasks in a
      SLE BCI compared to Debian.
    </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.11.5.3.1"><span class="term">Remove orphaned packages</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                Debian: <code class="command">apt-get autoremove -y</code>
              </p></li><li class="listitem"><p>
                SLE BCI: Not required if you remove installed packages using the
                <code class="command">zypper --non-interactive remove --clean-deps
                <em class="replaceable">PACKAGE_NAME</em></code>
              </p></li></ul></div></dd><dt id="id-1.11.5.3.2"><span class="term">Obtain container's architecture</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                Debian: <code class="command">dpkgArch="$(dpkg --print-architecture | awk
                -F- '{ print $NF }')"</code>
              </p></li><li class="listitem"><p>
                SLE BCI: <code class="command">arch="$(uname -p)"</code>
              </p></li></ul></div></dd><dt id="id-1.11.5.3.3"><span class="term">Install packages required for compilation</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                Debian: <code class="command">apt-get install -y build-essential</code>
              </p></li><li class="listitem"><p>
                SLE BCI: <code class="command">zypper -n in gcc gcc-c++ make</code>
              </p></li></ul></div></dd><dt id="id-1.11.5.3.4"><span class="term">Verify GnuPG signatures</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                Debian: <code class="command">gpg --batch --verify
                <em class="replaceable">SIGNATURE_URL</em>
                <em class="replaceable">FILE_TO_VERIFY</em></code>
              </p></li><li class="listitem"><p>
                SLE BCI: <code class="command">zypper -n in dirmngr; gpg --batch --verify
                <em class="replaceable">SIGNATURE_URL</em>
                <em class="replaceable">FILE_TO_VERIFY</em>; zypper -n remove
                --clean-deps dirmngr; zypper -n clean</code>
              </p></li></ul></div></dd></dl></div></section><section class="sect2" id="sec-bci-package-naming" data-id-title="Package naming conventions"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.4 </span><span class="title-name">Package naming conventions</span></span> <a title="Permalink" class="permalink" href="#sec-bci-package-naming">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      SLE package naming conventions differ from Debian, Ubuntu and Alpine,
      and they are closer to those of Red Hat Enterprise Linux. The main difference is that
      development packages of libraries (that is, packages containing headers
      and build description files) are named <code class="filename">PACKAGE-devel</code>
      in SLE, as opposed to <code class="filename">PACKAGE-dev</code> in Debian and
      Ubuntu. When in doubt, search for the package using the following
      command: <code class="command">docker run --rm
      registry.suse.com/bci/bci-base:<em class="replaceable">OS_VERSION</em>
      zypper search <em class="replaceable">PACKAGE_NAME</em></code> (replace
      <em class="replaceable">OS_VERSION</em> with the appropriate service
      version number, for example: <code class="literal">15.3</code> or
      <code class="literal">15.4</code>).
    </p></section><section class="sect2" id="sec-bci-gpg-keys" data-id-title="Adding GPG signing keys"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">10.5 </span><span class="title-name">Adding GPG signing keys</span></span> <a title="Permalink" class="permalink" href="#sec-bci-gpg-keys">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Adding external repositories to a container or container image normally
      requires importing the GPG key used for signing the packages. This can be
      done with the <code class="command">rpm --import
      <em class="replaceable">KEY_URL</em></code> command. This adds the key
      to the RPM database, and all packages from the repository can be
      installed afterwards.
    </p></section></section><section xml:lang="en" class="sect1" id="container-bci-get-started" data-id-title="Getting started with SLE Base Container Images"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">11 </span><span class="title-name">Getting started with SLE Base Container Images</span></span> <a title="Permalink" class="permalink" href="#container-bci-get-started">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The SLE BCIs are available as OCI-compatible container images directly from
    the <a class="link" href="https://registry.suse.com" target="_blank">SUSE Registry</a>, and
    they can be used like any other container image, for example:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman run --rm -it registry.suse.com/bci/bci-base:15.4 grep '^NAME' /etc/os-release NAME="{sles}"</pre></div><p>
    Alternatively, you can use a SLE BCI in <code class="literal">Dockerfile</code> as
    follows:
  </p><div class="verbatim-wrap"><pre class="screen">FROM registry.suse.com/bci/bci-base:15.4
    RUN zypper --non-interactive in python3 &amp;&amp; \
        echo "Hello Green World!" &gt; index.html
    ENTRYPOINT ["/usr/bin/python3", "-m", "http.server"]
    EXPOSE 8000</pre></div><p>
    You can then build container images using the <code class="command">docker build
    .</code> or <code class="command">buildah bud .</code> commands:
  </p><div class="verbatim-wrap"><pre class="screen">&gt; docker build .
    Sending build context to Docker daemon  2.048kB
    Step 1/4 : FROM registry.suse.com/bci/bci-base:15.4
     ---&gt; e34487b4c4e1
    Step 2/4 : RUN zypper --non-interactive in python3 &amp;&amp;     echo "Hello Green World!" &gt; index.html
     ---&gt; Using cache
     ---&gt; 9b527dfa45e8
    Step 3/4 : ENTRYPOINT ["/usr/bin/python3", "-m", "http.server"]
     ---&gt; Using cache
     ---&gt; 953080e91e1e
    Step 4/4 : EXPOSE 8000
     ---&gt; Using cache
     ---&gt; 48b33ec590a6
    Successfully built 48b33ec590a6
    
    <code class="prompt user">&gt; </code>docker run -p 8000:8000 --rm -d 48b33ec590a6
    575ad7edf43e11c2c9474055f7f6b7a221078739fc8ce5765b0e34a0c899b46a
    
    <code class="prompt user">&gt; </code>curl localhost:8000
    Hello Green World!</pre></div></section><section xml:lang="en" class="sect1" id="container-repo-reg" data-id-title="Registration and Online Repositories"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">12 </span><span class="title-name">Registration and Online Repositories</span></span> <a title="Permalink" class="permalink" href="#container-repo-reg">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    As a pre-requisite to work with containers on a SUSE Linux Enterprise Server, you have to enable
    the SLE Containers Module. It consists of container-related packages,
    including container engine and core container tools like on-premise
    registry. For more information about SLE Modules, refer to
    <a class="link" href="https://documentation.suse.com/sles/html/SLES-all/article-modules.html" target="_blank">https://documentation.suse.com/sles/html/SLES-all/article-modules.html</a>.
  </p><p>
    The regular SLE subscription includes SLE Containers Module free of
    charge.
  </p><section class="sect2" id="sec-sle-containers-module-yast" data-id-title="Enabling the Containers Module using the YaST graphical interface"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">12.1 </span><span class="title-name">Enabling the Containers Module using the YaST graphical interface</span></span> <a title="Permalink" class="permalink" href="#sec-sle-containers-module-yast">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
          Start YaST, and select
          <span class="guimenu">Software</span> › <span class="guimenu">Software
          Repositories</span>.
        </p></li><li class="step"><p>
          Click <span class="guimenu">Add</span> to open the add-on dialog.
        </p></li><li class="step"><p>
          Select <code class="option">Extensions and Modules</code> from
          <code class="option">Registration Server</code> and click
          <span class="guimenu">Next</span>.
        </p></li><li class="step"><p>
          From the list of available extensions and modules, select
          <code class="option">Containers Module 15 SP4 x86_64</code> and click
          <span class="guimenu">Next</span>. This adds the <code class="literal">Containers
          Module</code> and its repositories to the system.
        </p></li><li class="step"><p>
          If you use Repository Mirroring Tool, update the list of repositories
          on the RMT server.
        </p></li></ol></div></div></section><section class="sect2" id="sec-sle-containers-module-cli" data-id-title="Enabling the Containers Module from the command line using SUSEConnect"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">12.2 </span><span class="title-name">Enabling the Containers Module from the command line using SUSEConnect</span></span> <a title="Permalink" class="permalink" href="#sec-sle-containers-module-cli">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The Containers Module can also be added with the
      following command:
    </p><div class="verbatim-wrap"><pre class="screen">&gt; sudo SUSEConnect -p sle-module-containers/15.4/x86_64</pre></div></section><section class="sect2" id="sec-container-suseconnect" data-id-title="container-suseconnect"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">12.3 </span><span class="title-name">container-suseconnect</span></span> <a title="Permalink" class="permalink" href="#sec-container-suseconnect">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        <a class="link" href="https://github.com/SUSE/container-suseconnect" target="_blank"><code class="literal">container-suseconnect</code></a>
        is a plugin available in all SLE Base Container Images that ship with Zypper. When the
        plugin detects the host's SUSE Linux Enterprise Server registration credentials, it uses them
        to give the container access the SUSE Linux Enterprise repositories. This includes
        additional modules and previous package versions that are not part of
        the free SLE_BCI repository.
      </p><section class="sect3" id="sec-container-suseconnect-sle" data-id-title="Using container-suseconnect on SLES and openSUSE"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">12.3.1 </span><span class="title-name">Using container-suseconnect on SLES and openSUSE</span></span> <a title="Permalink" class="permalink" href="#sec-container-suseconnect-sle">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        If you are running a registered SLES system with Docker,
        <code class="literal">container-suseconnect</code> automatically detects and uses
        the subscription, without requiring any action on your part.
      </p><p>
        On openSUSE systems with Docker, you must copy the files
        <code class="filename">/etc/SUSEConnect</code> and
        <code class="filename">/etc/zypp/credentials.d/SCCcredentials</code> from a
        registered SLES machine to your local machine. Note that the
        <code class="filename">/etc/SUSEConnect</code> file is required only if you are
        using RMT for managing your registration credentials.
      </p></section><section class="sect3" id="sec-container-suseconnect-nonsle" data-id-title="Using container-suseconnect on non-SLES hosts or with Podman and Buildah"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">12.3.2 </span><span class="title-name">Using container-suseconnect on non-SLES hosts or with Podman and Buildah</span></span> <a title="Permalink" class="permalink" href="#sec-container-suseconnect-nonsle">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        You need a registered SLES system to use
        <code class="literal">container-suseconnect</code> on non-SLE hosts or with
        Podman and Buildah. This can be a physical machine, a virtual
        machine, or the SLE BCI-Base container with
        <span class="package">SUSEConnect</span> installed and registered.
      </p><p>
        If you do not use RMT, copy
        <code class="filename">/etc/zypp/credentials.d/SCCcredentials</code> to the
        development machine. Otherwise, copy both the
        <code class="filename">/etc/zypp/credentials.d/SCCcredentials</code> and
        <code class="filename">/etc/SUSEConnect</code> files.
      </p><p>
        You can use the following command to obtain
        <code class="literal">SCCcredentials</code> (replace
        <em class="replaceable">REGISTRATION_CODE</em> with your SCC registration
        code)
      </p><div class="verbatim-wrap"><pre class="screen">podman run --rm registry.suse.com/suse/sle15:latest bash -c \
        "zypper -n in SUSEConnect; SUSEConnect --regcode <em class="replaceable">REGISTRATION_CODE</em>; \
         cat /etc/zypp/credentials.d/SCCcredentials"</pre></div><p>
        If you are running a container based on a SLE BCI, mount
        <code class="filename">SCCcredentials</code> (and optionally
        <code class="filename">/etc/SUSEConnect</code>) in the correct destination. The
        following example shows how to mount
        <code class="filename">SCCcredentials</code> in the current working directory:
      </p><div class="verbatim-wrap"><pre class="screen">podman run -v /path/to/SCCcredentials:/etc/zypp/credentials.d/SCCcredentials \
        -it --pull=always registry.suse.com/bci/bci-base:latest</pre></div><p>
        Do not copy the <code class="filename">SCCcredentials</code> and
        <code class="filename">SUSEConnect</code> files into the container image to
        avoid inadvertently adding them to the final image. Use secrets
        instead, as they are only available to a single layer and are not part
        of the built image. To do this, put a copy of
        <code class="literal">SCCcredentials</code> (and optionally
        <code class="filename">SUSEConnect</code>) somewhere on the file system and
        modify the <code class="command">RUN</code> instructions that invoke Zypper as
        follows:
      </p><div class="verbatim-wrap"><pre class="screen">FROM registry.suse.com/bci/bci-base:latest
    
    RUN --mount=type=secret,id=SUSEConnect \
        --mount=type=secret,id=SCCcredentials \
        zypper -n in fluxbox</pre></div><p>
        Buildah support mounting secrets via the <code class="literal">--secret</code>
        flag as follows:
      </p><div class="verbatim-wrap"><pre class="screen">buildah bud --layers --secret=id=SCCcredentials,src=/path/to/SCCcredentials \
        --secret=id=SUSEConnect,src=/path/to/SUSEConnect .</pre></div><div id="id-1.13.6.4.12" data-id-title="known issue" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: known issue</div><p>
          container-suseconnect runs automatically every time you invoke
          Zypper. If you are not using a registered SLES host, you may see
          the following error message:
        </p><div class="verbatim-wrap"><pre class="screen">&gt; zypper ref
    Refreshing service 'container-suseconnect-zypp'.
    Problem retrieving the repository index file for service 'container-suseconnect-zypp':
    [container-suseconnect-zypp|file:/usr/lib/zypp/plugins/services/container-suseconnect-zypp]
    Warning: Skipping service 'container-suseconnect-zypp' because of the above error.</pre></div><p>
          Ignore the message, as it simply indicates that container-suseconnect
          was not able to retrieve your SUSE Customer Center credentials, and
          thus could not add the full SLE repositories. You still have full
          access to the SLE_BCI repository, and can continue using the
          container as intended.
        </p></div></section><section class="sect3" id="sec-container-suseconnect-modules" data-id-title="Adding modules into the container or container Image"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">12.3.3 </span><span class="title-name">Adding modules into the container or container Image</span></span> <a title="Permalink" class="permalink" href="#sec-container-suseconnect-modules">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        <code class="literal">container-suseconnect</code> allows you to automatically
        add SLE Modules into a container or container image. What modules
        are added is determined by the environment variable
        <code class="literal">ADDITIONAL_MODULES</code> that includes a comma-separated
        list of the module names. In a <code class="filename">Dockerfile</code>, this is
        done using the <code class="literal">ENV</code> directive as follows:
      </p><div class="verbatim-wrap"><pre class="screen">FROM registry.suse.com/bci/bci-base:latest
    ENV ADDITIONAL_MODULES sle-module-desktop-applications,sle-module-development-tools
    
    RUN --mount=type=secret,id=SCCcredentials zypper -n in fluxbox &amp;&amp; zypper -n clean</pre></div></section></section></section><section xml:lang="en" class="sect1" id="container-podman" data-id-title="Podman overview"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">13 </span><span class="title-name">Podman overview</span></span> <a title="Permalink" class="permalink" href="#container-podman">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    <a class="link" href="https://podman.io/" target="_blank">Podman</a> is short for Pod
    Manager Tool. It is a daemonless container engine for managing Open
    Container Initiative (OCI) containers on a Linux system, and it offers a
    drop-in alternative for Docker. Podman's by default supports for rootless
    containers, which reduces reduced attack surface when running containers.
    Podman can be used to create OCI-compliant container images using a
    <code class="literal">Dockerfile</code> and a range of commands identical to Docker Open Source Engine.
    For example, the <code class="literal">podman build</code> command performs the same
    task as <code class="literal">docker build</code>. In other words, Podman provides
    a drop-in replacement for Docker Open Source Engine.
  </p><p>
    Moving from Docker Open Source Engine to Podman does not require any changes in the
    established workflow. There is no need to rebuild images, and you can use
    the exact same commands to build and manage images as well as run and
    control containers.
  </p><p>
    Podman differs from Docker Open Source Engine in the following ways:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        Podman does not use a daemon, so the container engine interacts
        directly with an image registry, containers and image storage when
        needed.
      </p></li><li class="listitem"><p>
        Podman features native systemd integration that allows for the use of
        systemd to run containers. Generating the required systemd unit files
        is supported by Podman using the <code class="command">podman generate
        systemd</code> command. Moreover, Podman can run systemd inside
        containers.
      </p></li><li class="listitem"><p>
        Podman does not require root privileges to create and run containers.
        This means that Podman can run under the <code class="literal">root</code> user
        as well as in an unprivileged environment. Moreover, a container
        created by an unprivileged user cannot get higher privileges on the
        host than the container's creator.
      </p></li><li class="listitem"><p>
        Podman can be configured to search multiple registries by reading
        <code class="filename">/etc/containers/registries.conf</code> file.
      </p></li><li class="listitem"><p>
        Podman can deploy applications from Kubernetes manifests
      </p></li><li class="listitem"><p>
        Podman supports launching systemd inside a container and requires no
        potentially dangerous workarounds.
      </p></li></ul></div><p>
    Podman makes it possible to group containers into pods. Pods share the
    same network interface. A typical scenario for grouping containers into a
    pod is a container that runs a database and a container with a client that
    accesses the database. For further information about pods, refer to
    <a class="xref" href="#sec-orchestration-podman" title="20.1. Single container host with Podman">Section 20.1, “Single container host with Podman”</a>.
  </p><section class="sect2" id="sec-podman-install" data-id-title="Podman installation"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">13.1 </span><span class="title-name">Podman installation</span></span> <a title="Permalink" class="permalink" href="#sec-podman-install">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      To install Podman, make sure you have the SLE Containers Module
      enabled (see <a class="xref" href="#container-repo-reg" title="12. Registration and Online Repositories">Section 12, “Registration and Online Repositories”</a>), run the
      command <code class="command">sudo zypper in podman</code>. Then run
      <code class="command">podman info</code> to check whether Podman has been
      installed successfully.
    </p><p>
      By default, Podman launches containers as the current user. For
      unprivileged users, this means launching containers in rootless mode.
      Support for rootless containers is enabled for all newly created users in
      SLE by default, and no additional steps are necessary.
    </p><p>
      In case Podman fails to launch containers in rootless mode, check
      whether an entry for the current user is present in
      <code class="literal">/etc/subuid</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>grep $(id -nu) /etc/subuid
    user:10000:65536</pre></div><p>
      When no entry is found, add the required sub-UID and sub-GID entries via
      the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo usermod --add-subuids 100000-165535 --add-subgids 100000-165535 $(id -nu)</pre></div><p>
      To enable the change, reboot the machine or stop the session of the
      current user. To do the latter, run <code class="command">loginctl list-sessions |
      grep <em class="replaceable">USER</em></code> and note the session ID.
      Then run <code class="command">loginctl kill-session
      <em class="replaceable">SESSION_ID</em></code> to stop the session.
    </p><p>
      The <code class="command">usermod</code> above defines a range of local UIDs to
      which the UIDs allocated to users inside the container are mapped on the
      host. Note that the ranges defined for different users must not overlap.
      It is also important that the ranges do not reuse the UID of an existing
      local user or group. By default, adding a user with the
      <code class="command">useradd</code> command on <span class="phrase"><span class="phrase">SUSE Linux</span></span> automatically
      allocates sub-UID and sub-GID ranges.
    </p><p>
      When using rootless containers with Podman, it is recommended to use
      cgroups v2. cgroups v1 are limited in terms of functionality compared to
      v2. For example, cgroups v1 do not allow proper hierarchical delegation to
      user's subtrees. Additionally, Podman is unable to read container logs
      properly with cgroups v1 and the systemd log driver. To enable cgroups v2,
      add the following to the kernel cmdline:
      <code class="option">systemd.unified_cgroup_hierarchy=1</code>
    </p><p>
      Running a container with Podman in rootless mode on SUSE Linux Enterprise Server may fail,
      because the container needs read access to the SUSE Customer Center credentials. For
      example, running a container with the command <code class="command">podman run -it
      --rm registry.suse.com/suse/sle15 bash</code> and then executing
      <code class="command">zypper ref</code> results in the following error message:
    </p><div class="verbatim-wrap"><pre class="screen">Refreshing service 'container-suseconnect-zypp'.
    Problem retrieving the repository index file for service 'container-suseconnect-zypp':
    [container-suseconnect-zypp|file:/usr/lib/zypp/plugins/services/container-suseconnect-zypp]
    Warning: Skipping service 'container-suseconnect-zypp' because of the above error.
    Warning: There are no enabled repositories defined.
    Use 'zypper addrepo' or 'zypper modifyrepo' commands to add or enable repositories</pre></div><p>
      To solve the problem, grant the current user the required access rights
      by running the following command on the host:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo setfacl -m u:$(id -nu):r /etc/zypp/credentials.d/*</pre></div><p>
      Log out and log in again to apply the changes.
    </p><p>
      To give multiple users the required access, create a dedicated group
      using the <code class="command">groupadd
      <em class="replaceable">GROUPNAME</em></code> command. Then use the
      following command to change the group ownership and rights of files in
      the <code class="filename">/etc/zypp/credentials.d/</code> directory.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo chgrp <em class="replaceable">GROUPNAME</em> /etc/zypp/credentials.d/*
      <code class="prompt user">&gt; </code>sudo chmod g+r /etc/zypp/credentials.d/*</pre></div><p>
      You can then grant a specific user write access by adding them to the
      created group.
    </p><section class="sect3" id="sec-podman-rootless-containers-tricks" data-id-title="Tips and tricks for rootless containers"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">13.1.1 </span><span class="title-name">Tips and tricks for rootless containers</span></span> <a title="Permalink" class="permalink" href="#sec-podman-rootless-containers-tricks">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Podman remaps user IDs with rootless containers. In the following
        example, Podman remaps the current user to the default user in the
        container:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman run --rm -it registry.suse.com/bci/bci-base id
    uid=0(root) gid=0(root) groups=0(root)</pre></div><p>
        Note that even if you are root in the container, you cannot gain
        superuser privileges outside of it.
      </p><p>
        This user remapping can have undesired side effects when sharing data
        with the host, where the shared files belong to different user IDs in
        the container and on the host. The issue can be solved using the
        command-line flag <code class="option">--userns=keep-id</code> that makes it
        possible to keep the current user id in the container:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman run --userns=keep-id --rm -it registry.suse.com/bci/bci-base id
    uid=1000(user) gid=1000(users) groups=1000(users)</pre></div><p>
        The flag <code class="option">--userns=keep-id</code> has a similar effect when
        used with bind mounts:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman run --rm -it -v $(pwd):/share/ registry.suse.com/bci/bci-base stat /share/
      File: /share/
      Size: 318             Blocks: 0          IO Block: 4096   directory
    Device: 2ch/44d Inode: 3506170     Links: 1
    Access: (0755/drwxr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)
    Access: 2023-05-03 12:52:18.636392618 +0000
    Modify: 2023-05-03 12:52:17.178380923 +0000
    Change: 2023-05-03 12:52:17.178380923 +0000
     Birth: 2023-05-03 12:52:15.852370288 +0000
    
     <code class="prompt user">&gt; </code>podman run --userns=keep-id --rm -it -v $(pwd):/share/ registry.suse.com/bci/bci-base stat /share/
      File: /share/
      Size: 318             Blocks: 0          IO Block: 4096   directory
    Device: 2ch/44d Inode: 3506170     Links: 1
    Access: (0755/drwxr-xr-x)  Uid: ( 1000/     user)   Gid: ( 1000/     users)
    Access: 2023-05-03 12:52:18.636392618 +0000
    Modify: 2023-05-03 12:52:17.178380923 +0000
    Change: 2023-05-03 12:52:17.178380923 +0000
     Birth: 2023-05-03 12:52:15.852370288 +0000</pre></div><p>
        Podman stores the containers' data in the storage graph root (default
        is <code class="filename">~/.local/share/containers/storage</code>). Because of
        the way Podman remaps user IDs in rootless containers, the graph root
        may contain files that are not owned by your current user but by a user
        ID in the sub-UID region assigned to your user. As these files do not
        belong to your current user, they can be inaccessible to you.
      </p><p>
        To read or modify any file in the graph root, enter a shell as follows:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman unshare bash
    
    <code class="prompt user">&gt; </code>id
    uid=0(root) gid=0(root) groups=0(root),65534(nobody)</pre></div><p>
        Note that <code class="command">podman unshare</code> performs the same user
        remapping as <code class="command">podman run</code> does when launching a
        rootless container. You cannot gain elevated privileges via
        <code class="command">podman unshare</code>.
      </p><p>
        Do not modify files in the graph root as this can corrupt Podman's
        internal state and render your containers, images and volumes
        inoperable.
      </p></section><section class="sect3" id="id-caveats-of-rootless-containers" data-id-title="Caveats of rootless containers"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">13.1.2 </span><span class="title-name">Caveats of rootless containers</span></span> <a title="Permalink" class="permalink" href="#id-caveats-of-rootless-containers">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Because unprivileged users cannot configure network namespaces on
        Linux, Podman relies on a userspace network implementation called
        <code class="literal">slirp4netns</code>. It emulates the full TCP-IP stack and
        can cause a heavy performance degradation for workloads relying on high
        network transfer rates. This means that rootless containers suffer from
        slow network transfers.
      </p><p>
        On Linux, unprivileged users cannot open ports below port number 1024.
        This limitation also applies to Podman, so by default, rootless
        containers cannot expose ports below port number 1024. You can remove
        this limitation using the following command: <code class="command">sysctl
        net.ipv4.ip_unprivileged_port_start=0</code>.
      </p><p>
        To remove the limitation permanently, run <code class="command">sysctl -w
        net.ipv4.ip_unprivileged_port_start=0</code>.
      </p><p>
        Note that this allows <span class="strong"><strong>all</strong></span>
        unprivileged applications to bind to ports below 1024.
      </p></section><section class="sect3" id="sec-podman-docker" data-id-title="podman-docker"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">13.1.3 </span><span class="title-name">podman-docker</span></span> <a title="Permalink" class="permalink" href="#sec-podman-docker">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Because Podman is compatible with Docker Open Source Engine, it features the same
        command-line interface. You can also install the package
        <span class="package">podman-docker</span> that allows you to use an emulated
        Docker CLI with Podman. For example, the <code class="command">docker
        pull</code> command, that fetches a container image from a registry,
        executes <code class="command">podman pull</code> instead. The <code class="command">docker
        build</code> command executes <code class="command">podman build</code>, etc.
      </p><p>
        Podman also features a Docker Open Source Engine compatible socket that can be launched
        use the following command:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo systemctl start podman.socket</pre></div><p>
        The Podman socket can be used by applications designed to communicate
        with Docker Open Source Engine to launch containers transparently via Podman. The
        Podman socket can be used to launch containers using <code class="command">docker
        compose</code>, without running Docker Open Source Engine.
      </p></section></section><section class="sect2" id="sec-podman-get" data-id-title="Obtaining container images"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">13.2 </span><span class="title-name">Obtaining container images</span></span> <a title="Permalink" class="permalink" href="#sec-podman-get">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect3" id="sec-podman-registries" data-id-title="Configuring container registries"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">13.2.1 </span><span class="title-name">Configuring container registries</span></span> <a title="Permalink" class="permalink" href="#sec-podman-registries">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Unlike Docker Open Source Engine, Podman can be configured to search multiple container
        registries. To make Podman search the SUSE Registry first and use
        Docker Hub as a fallback, add the following configuration to the
        <code class="filename">/etc/containers/registries.conf</code> file:
      </p><div class="verbatim-wrap"><pre class="screen">unqualified-search-registries = ["registry.suse.com", "docker.io"]</pre></div><p>
        Note that this step can be skipped on <span class="phrase"><span class="phrase">SUSE Linux</span></span>. On both
        distributions, SUSE Registry and
        <code class="literal">registry.opensuse.org</code> have priority over Docker Hub.
      </p></section><section class="sect3" id="sec-podman-search" data-id-title="Searching images in registries"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">13.2.2 </span><span class="title-name">Searching images in registries</span></span> <a title="Permalink" class="permalink" href="#sec-podman-search">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Using the <code class="command">podman search</code> command allow you to list
        available containers in the registries defined in
        <code class="filename">/etc/containers/registries.conf</code>.
      </p><p>
        To search in all registries:
      </p><div class="verbatim-wrap"><pre class="screen">podman search go</pre></div><p>
        To search in a specific registry:
      </p><div class="verbatim-wrap"><pre class="screen">podman search registry.suse.com/go</pre></div></section><section class="sect3" id="id-downloading-pulling-images" data-id-title="Downloading (pulling) images"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">13.2.3 </span><span class="title-name">Downloading (pulling) images</span></span> <a title="Permalink" class="permalink" href="#id-downloading-pulling-images">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        The <code class="command">podman pull</code> command pulls an image from an image
        registry:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman pull <em class="replaceable">REGISTRY</em>:<em class="replaceable">PORT</em>/<em class="replaceable">NAMESPACE</em>/<em class="replaceable">NAME</em>:<em class="replaceable">TAG</em></pre></div><p>
        For example:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman pull registry.suse.com/bci/bci-base</pre></div><p>
        Note that if you do not specify a tag, Podman pulls the
        <code class="literal">latest</code> tag.
      </p></section></section><section class="sect2" id="sec-podman-tag" data-id-title="Renaming images and images tag"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">13.3 </span><span class="title-name">Renaming images and images tag</span></span> <a title="Permalink" class="permalink" href="#sec-podman-tag">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Tags are used to assign container images descriptive names, thus making
      it easier to identify individual images.
    </p><p>
      Pull the SLE BCI-Base image from SUSE Registry:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman pull registry.suse.com/bci/bci-base
    Trying to pull registry.suse.com/bci/bci-base:latest...
    Getting image source signatures
    Copying blob bf6ca87723f2 done
    Copying config 34578a383c done
    Writing manifest to image destination
    Storing signatures
    34578a383c7b6fdcb85f90fbad59b7e7a16071cf47843688e90fe20ff64a684</pre></div><p>
      List the pulled images:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman images
    REPOSITORY                      TAG         IMAGE ID      CREATED        SIZE
    registry.suse.com/bci/bci-base  latest      34578a383c7b  22 hours ago   122 MB</pre></div><p>
      Rename the SLE BCI-Base image to <code class="literal">my-base</code>:
    </p><div class="verbatim-wrap"><pre class="screen">podman tag 34578a383c7b my-base</pre></div><div class="verbatim-wrap"><pre class="screen">podman images
    REPOSITORY                      TAG         IMAGE ID      CREATED        SIZE
    registry.suse.com/bci/bci-base  latest      34578a383c7b  22 hours ago   122 MB
    localhost/my-base               latest      34578a383c7b  22 hours ago   122 MB</pre></div><p>
      Add a custom tag <code class="literal">1</code> (indicating that this version 1 of
      the image) to <code class="literal">my-base</code>:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman tag 34578a383c7b my-base:1</pre></div><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman images
    REPOSITORY                      TAG         IMAGE ID      CREATED        SIZE
    registry.suse.com/bci/bci-base  latest      34578a383c7b  22 hours ago   122 MB
    localhost/my-base               latest      34578a383c7b  22 hours ago   122 MB
    localhost/my-base               1           34578a383c7b  22 hours ago   122 MB</pre></div><p>
      Note that the default tag <code class="literal">latest</code> is still present.
    </p></section><section class="sect2" id="sec-podman-run" data-id-title="Deploying container images"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">13.4 </span><span class="title-name">Deploying container images</span></span> <a title="Permalink" class="permalink" href="#sec-podman-run">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Similar to Docker Open Source Engine, Podman can run containers in an interactive mode,
      allowing you to inspect and work with an image. To run the
      <code class="literal">suse/sle15</code> image in interactive mode, use the
      following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman run --rm -ti suse/sle15</pre></div></section><section class="sect2" id="sec-podman-build-images" data-id-title="Building images with Podman"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">13.5 </span><span class="title-name">Building images with Podman</span></span> <a title="Permalink" class="permalink" href="#sec-podman-build-images">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Podman can build images from a <code class="filename">Dockerfile</code>. The
      <code class="command">podman build</code> command behaves as <code class="command">docker
      build</code>, and it accepts the same options.
    </p><p>
      Podman’s companion tool Buildah provides an alternative way to build
      images. For further information about Buildah, refer to
      <a class="xref" href="#container-buildah" title="17. Buildah overview">Section 17, “Buildah overview”</a>.
    </p></section></section><section xml:lang="en" class="sect1" id="container-docker" data-id-title="Setting up Docker Open Source Engine"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">14 </span><span class="title-name">Setting up Docker Open Source Engine</span></span> <a title="Permalink" class="permalink" href="#container-docker">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect2" id="sec-preparation" data-id-title="Preparing the host"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.1 </span><span class="title-name">Preparing the host</span></span> <a title="Permalink" class="permalink" href="#sec-preparation">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Before installing any Docker-related packages, you need to enable the
      Containers Module:
    </p><div id="id-1.15.2.3" data-id-title="Built-in Docker orchestration support" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Built-in Docker orchestration support</div><p>
        Container orchestration is a part of Docker Open Source Engine. Even though this feature
        is available in <span class="phrase"><span class="phrase">SUSE Linux</span></span>, it is not supported by SUSE, and is
        only provided as a technology preview. Use Kubernetes for container
        orchestration. For details, refer to the
        <a class="link" href="http://kubernetes.io/docs/getting-started-guides/kubeadm/" target="_blank">Kubernetes documentation</a>.
      </p></div><section class="sect3" id="id-installing-and-configuring-docker-open-source-engine" data-id-title="Installing and configuring Docker Open Source Engine"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">14.1.1 </span><span class="title-name">Installing and configuring Docker Open Source Engine</span></span> <a title="Permalink" class="permalink" href="#id-installing-and-configuring-docker-open-source-engine">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            Install the <span class="package">docker</span> package:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo zypper install docker</pre></div></li><li class="listitem"><p>
            Enable the Docker service, so it starts automatically at boot
            time:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo systemctl enable docker.service</pre></div><p>
            This also enables <code class="literal">docker.socket</code>.
          </p></li><li class="listitem"><p>
            Open the <code class="filename">/etc/sysconfig/docker</code> file. Search
            for the parameter <code class="option">DOCKER_OPTS</code> and add
            <code class="option">--insecure-registry ADDRESS_OF_YOUR_REGISTRY</code>.
          </p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>
                Add CA certificates to the directory
                <code class="filename">/etc/docker/certs.d/REGISTRY_ADDRESS</code>:
              </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo cp CA /etc/pki/trust/anchors/</pre></div></li><li class="listitem"><p>
                Copy the CA certificates to your system:
              </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo update-ca-certificates</pre></div></li></ol></div></li><li class="listitem"><p>
            Start the Docker service:
          </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo systemctl start docker.service</pre></div><p>
            This also starts <code class="literal">docker.socket</code>.
          </p></li></ol></div><p>
        The Docker daemon listens on a local socket accessible only by the
        root user and by the members of the docker group. The docker group is
        automatically created during package installation.
      </p><p>
        To allow a certain user to connect to the local Docker daemon, use
        the following command:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo /usr/sbin/usermod -aG docker USERNAME</pre></div><p>
        This allows the user to communicate with the local Docker daemon.
      </p></section></section><section class="sect2" id="sec-docker-setup-net" data-id-title="Configuring the network"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.2 </span><span class="title-name">Configuring the network</span></span> <a title="Permalink" class="permalink" href="#sec-docker-setup-net">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      To give the containers access to the external network, enable the
      <code class="literal">ipv4 ip_forward</code> rule.
    </p><section class="sect3" id="sec-docker-setup-net-docs" data-id-title="How Docker Open Source Engine interacts with iptables"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">14.2.1 </span><span class="title-name">How Docker Open Source Engine interacts with iptables</span></span> <a title="Permalink" class="permalink" href="#sec-docker-setup-net-docs">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        To learn more about how containers interact with each other and the
        system firewall, see the
        <a class="link" href="https://docs.docker.com/v17.09/engine/userguide/networking/default_network/container-communication/" target="_blank">Docker
        documentation</a>.
      </p><p>
        It is also possible to prevent Docker Open Source Engine from manipulating
        <code class="literal">iptables</code>. See the
        <a class="link" href="https://docs.docker.com/network/iptables/#prevent-docker-from-manipulating-iptables" target="_blank">Docker
        documentation</a>.
      </p></section></section><section class="sect2" id="sec-docker-storaged" data-id-title="Storage drivers"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.3 </span><span class="title-name">Storage drivers</span></span> <a title="Permalink" class="permalink" href="#sec-docker-storaged">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Docker Open Source Engine supports different storage drivers:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          vfs: This driver is automatically used when the Docker host file
          system does not support copy-on-write. This driver is simpler than
          the others listed and does not offer certain advantages of Docker Open Source Engine
          such as shared layers. It is a slow but reliable driver.
        </p></li><li class="listitem"><p>
          devicemapper: This driver relies on the device-mapper thin
          provisioning module. It supports copy-on-write, so it provides all
          the advantages of Docker Open Source Engine.
        </p></li><li class="listitem"><p>
          btrfs: This driver relies on Btrfs to offer all the features required
          by Docker Open Source Engine. To use this driver, the
          <code class="filename">/var/lib/docker</code> directory must be on a Btrfs
          file system.
        </p></li></ul></div><p>
      <span class="phrase"><span class="phrase">SUSE Linux</span></span> uses the Btrfs file system by default. This forces Docker Open Source Engine
      to use the btrfs driver.
    </p><p>
      It is possible to specify what driver to use by changing the value of the
      <code class="option">DOCKER_OPTS</code> variable defined in the
      <code class="filename">/etc/sysconfig/docker</code> file. This can be done either
      manually or using YaST by browsing to the
      <span class="guimenu">System</span> › <span class="guimenu">/etc/sysconfig
      Editor</span> › <span class="guimenu">System</span> › <span class="guimenu">Management</span> › <span class="guimenu">DOCKER_OPTS</span>
      menu and entering the <code class="literal">-s storage_driver</code> string.
    </p><p>
      For example, to enable the devicemapper driver, enter the following text:
    </p><div class="verbatim-wrap"><pre class="screen">DOCKER_OPTS="-s devicemapper"</pre></div><div id="id-1.15.4.8" data-id-title="Mounting /var/lib/docker" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Mounting <code class="filename">/var/lib/docker</code></div><p>
        It is recommended to mount <code class="filename">/var/lib/docker</code> on a
        separate partition or volume. In case of file system corruption, this
        allows the operating system to run Docker Open Source Engine unaffected.
      </p><p>
        If you choose the Btrfs file system for
        <code class="filename">/var/lib/docker</code>, it is strongly recommended to
        create a subvolume for it. This ensures that the directory is excluded
        from file system snapshots. If you do not exclude
        <code class="filename">/var/lib/docker</code> from snapshots, there is a risk of
        the file system running out of disk space soon after you start
        deploying containers. Moreover, a rollback to a previous snapshot will
        also reset the Docker database and images. For more information, see
        <a class="link" href="https://documentation.suse.com/sles/html/SLES-all/cha-snapper.html#sec-snapper-setup-customizing-new-subvolume" target="_blank">https://documentation.suse.com/sles/html/SLES-all/cha-snapper.html#sec-snapper-setup-customizing-new-subvolume</a>.
      </p></div></section><section class="sect2" id="sec-docker-setup-updates" data-id-title="Updates"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">14.4 </span><span class="title-name">Updates</span></span> <a title="Permalink" class="permalink" href="#sec-docker-setup-updates">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      All updates to the <span class="package">docker</span> package are marked as
      interactive (that is, no automatic updates) to avoid accidental updates
      that can break running container workloads. Stop all running containers
      before applying a Docker Open Source Engine update.
    </p><p>
      To prevent data loss, avoid workloads that rely on containers which
      automatically start after Docker Open Source Engine update. Although it is technically
      possible to keep containers running during an update via the
      <code class="option">--live-restore</code> option, such updates can introduce
      regressions. SUSE does not support this feature.
    </p></section></section><section xml:lang="en" class="sect1" id="container-registry" data-id-title="Configuring image storage"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">15 </span><span class="title-name">Configuring image storage</span></span> <a title="Permalink" class="permalink" href="#container-registry">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Before creating custom images, decide where you want to store images. The
    easiest solution is to push images to
    <a class="link" href="https://hub.docker.com" target="_blank">Docker Hub</a>. By default, all
    images pushed to Docker Hub are public. Make sure not to publish sensitive data
    or software not licensed for public use.
  </p><p>
    You can restrict access to custom container images with the following:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        Docker Hub allows creating private repositories for paid subscribers.
      </p></li><li class="listitem"><p>
        An on-site Docker Registry allows storing all the container images used by your
        organization.
      </p></li></ul></div><p>
    Instead of using Docker Hub you can run a local instance of Docker Registry, an open
    source platform for storing and retrieving container images.
  </p><section class="sect2" id="sec-docker-registry-installation" data-id-title="Running a Docker Registry"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">15.1 </span><span class="title-name">Running a Docker Registry</span></span> <a title="Permalink" class="permalink" href="#sec-docker-registry-installation">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The SUSE Registry provides a container image that makes it possible to
      run a local Docker Registry as a container. Before you start a container, create a
      <code class="filename">config.yml</code> file with the following example
      configuration:
    </p><div class="verbatim-wrap"><pre class="screen">version: 0.1
    log:
      level: info
    storage:
      filesystem:
        rootdirectory: /var/lib/docker-registry
    http:
      addr: 0.0.0.0:5000</pre></div><p>
      Also create an empty directory to map the
      <code class="filename">/var/lib/docker-registry</code> directory outside the
      container. This directory is used for storing container images.
    </p><p>
      Run the following command to pull the registry container image from the
      SUSE Registry and start a container that can be accessed on port 5000:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman run -d --restart=always --name registry -p 5000:5000 \
    -v /PATH/config.yml:/etc/docker/registry/config.yml \
    -v /PATH/DIR:/var/lib/ \ docker-registry registry.suse.com/sles12/registry:2.6.2</pre></div><p>
      To make it easier to manage the registry, create a corresponding system
      unit:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code> sudo podman generate systemd registry &gt;  \
     /etc/systemd/system/suse_registry.service</pre></div><p>
      Enable and start the registry service, then verify its status:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo systemctl enable suse_registry.service
      <code class="prompt user">&gt; </code>sudo systemctl start suse_registry.service
      <code class="prompt user">&gt; </code>sudo systemctl status suse_registry.service</pre></div><p>
      For more details about Docker Registry and its configuration, see the official
      documentation at
      <a class="link" href="https://docs.docker.com/registry/" target="_blank">https://docs.docker.com/registry/</a>.
    </p></section><section class="sect2" id="sec-docker-registry-limitations" data-id-title="Limitations"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">15.2 </span><span class="title-name">Limitations</span></span> <a title="Permalink" class="permalink" href="#sec-docker-registry-limitations">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Docker Registry has two major limitations:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          It lacks any form of authentication. That means everybody with access
          to Docker Registry can push and pull images to it. That includes overwriting
          existing images.
        </p></li><li class="listitem"><p>
          It is not possible to see which images have been pushed to Docker Registry.
          You need to keep a record of what is being stored on it. There is
          also no search functionality.
        </p></li></ul></div></section></section><section xml:lang="en" class="sect1" id="container-verify" data-id-title="Verifying container images"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">16 </span><span class="title-name">Verifying container images</span></span> <a title="Permalink" class="permalink" href="#container-verify">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Verifying container images allows you to confirm their provenance, thus
    ensuring the supply chain security. This chapter provides information on
    signing and verifying container images.
  </p><section class="sect2" id="sec-verify-docker" data-id-title="Verifying SLE Base Container Images with Docker"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">16.1 </span><span class="title-name">Verifying SLE Base Container Images with Docker</span></span> <a title="Permalink" class="permalink" href="#sec-verify-docker">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Signatures for images available through SUSE Registry are stored in the
      Notary. You can verify the signature of a specific image using the
      following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>docker trust inspect --pretty registry.suse.com/suse/<em class="replaceable">IMAGE</em>:<em class="replaceable">TAG</em></pre></div><p>
      For example, the command <code class="command">docker trust inspect --pretty
      registry.suse.com/suse/sle15:latest</code> verifies the signature of
      the latest SLE15 base image.
    </p><p>
      To automatically validate an image when you pull it, set the environment
      <code class="literal">DOCKER_CONTENT_TRUST</code> to <code class="literal">1</code>. For
      example:
    </p><div class="verbatim-wrap"><pre class="screen">env DOCKER_CONTENT_TRUST=1 docker pull registry.suse.com/suse/sle15:latest</pre></div></section><section class="sect2" id="sec-verify-cosign" data-id-title="Verifying SLE Base Container Images with Cosign"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">16.2 </span><span class="title-name">Verifying SLE Base Container Images with Cosign</span></span> <a title="Permalink" class="permalink" href="#sec-verify-cosign">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      To verify a SLE BCI, run Cosign in the container. The command below
      fetches the signing key from the SUSE server and uses it to verify the
      latest SLE BCI-Base container image.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman run --rm -it gcr.io/projectsigstore/cosign verify \
        --key https://ftp.suse.com/pub/projects/security/keys/container-key.pem \
        registry.suse.com/bci/bci-base:latest | tail -1 | jq
    
    [
      {
        "critical": {
          "identity": {
            "docker-reference": "registry.suse.com/bci/bci-base"
          },
          "image": {
            "docker-manifest-digest": "sha256:52a828600279746ef669cf02a599660cd53faf4b2430a6b211d593c3add047f5"
          },
          "type": "cosign container image signature"
        },
        "optional": {
          "creator": "OBS"
        }
      }
    ]</pre></div><p>
      The signing key can be used to verify all SLE BCIs, and it also ships with
      <span class="phrase"><span class="phrase">SUSE Linux</span></span> (the
      <code class="filename">/usr/share/container-keys/suse-container-key.pem</code>
      file).
    </p><p>
      You can also check SLE BCIs against
      <a class="link" href="https://github.com/sigstore/rekor" target="_blank">rekor</a>, the
      immutable tamper resistant ledger. For example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman run --rm -it -e COSIGN_EXPERIMENTAL=1 gcr.io/projectsigstore/cosign \
        verify --key https://ftp.suse.com/pub/projects/security/keys/container–key.pem \
        registry.suse.com/bci/bci-base:latest | tail -1 | jq
    [
      {
        "critical": {
          "identity": {
            "docker-reference": "registry.suse.com/bci/bci-base"
          },
          "image": {
            "docker-manifest-digest": "sha256:52a828600279746ef669cf02a599660cd53faf4b2430a6b211d593c3add047f5"
          },
          "type": "cosign container image signature"
        },
        "optional": {
          "creator": "OBS"
        }
      }
    ]</pre></div><p>
      If verification fails, the output of the <code class="command">cosign verify</code>
      command is similar to the one below.
    </p><div class="verbatim-wrap"><pre class="screen">Error: no matching signatures:
    crypto/rsa: verification error
    main.go:62: error during command execution: no matching signatures:
    crypto/rsa: verification error</pre></div></section><section class="sect2" id="sec-verify-podman" data-id-title="Verifying SLE Base Container Images with Podman"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">16.3 </span><span class="title-name">Verifying SLE Base Container Images with Podman</span></span> <a title="Permalink" class="permalink" href="#sec-verify-podman">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Before you can verify SLE BCIs using Podman, you must specify
      <code class="literal">registry.suse.com</code> as the registry for image
      verification.
    </p><div id="id-1.17.5.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
        Skip this step on <span class="phrase"><span class="phrase">SUSE Linux</span></span>, as the correct configuration is
        already in place.
      </p></div><p>
      To do this, add the following configuration to
      <code class="filename">/etc/containers/registries.d/default.yaml</code>:
    </p><div class="verbatim-wrap highlight YAML"><pre class="screen">docker:
      registry.suse.com:
        use-sigstore-attachments: true</pre></div><p>
      Instead of editing the <code class="filename">default.yaml</code>, you can create
      a new file in <code class="filename">/etc/containers/registries.d/</code> with a
      filename of your choice.
    </p><p>
      Next, modify the
      <a class="link" href="https://github.com/containers/image/blob/main/docs/containers-policy.json.5.md" target="_blank">/etc/containers/policy.json</a>
      file. Under the <code class="literal">docker</code> attribute, add the
      <code class="literal">registry.suse.com</code> configuration similar to the
      following:
    </p><div class="verbatim-wrap highlight json"><pre class="screen">{
      "default": [
        {
          "type": "insecureAcceptAnything"
        }
      ],
      "transports": {
        "docker-daemon": {
          "": [
            {
              "type": "insecureAcceptAnything"
            }
          ]
        },
        "docker": {
          "registry.suse.com": [
            {
              "type": "sigstoreSigned",
              "keyPath": "/usr/share/pki/containers/suse-container-key.pem",
              "signedIdentity": {
                "type": "matchRepository"
              }
            }
          ]
        }
      }
    }</pre></div><p>
      The specified configuration instructs Podman, skopeo and Buildah to
      verify images under the <code class="literal">registry.suse.com</code> repository.
      This way,Podman checks the validity of the signature using the
      specified public key before pulling the image. It rejects the image if
      the validation fails.
    </p><div id="id-1.17.5.10" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
        Do not remove existing entries in
        <code class="filename">transports.docker</code>. Append the entry for
        <code class="literal">registry.suse.com</code> to the list.
      </p></div><div class="informalexample"><p>
        Fetch the public key used to sign SLE BCIs from
        <a class="link" href="https://www.suse.com/support/security/keys/" target="_blank">SUSE
        Signing Keys</a>, or use the following command:
      </p><div class="verbatim-wrap"><pre class="screen">&gt; sudo curl -s https://ftp.suse.com/pub/projects/security/keys/container–key.pem \
        -o /usr/share/pki/containers/suse-container-key.pem</pre></div><div id="id-1.17.5.11.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
          This step is optional on <span class="phrase"><span class="phrase">SUSE Linux</span></span>. The signing key is already
          available in
          <code class="filename">/usr/share/pki/containers/suse-container-key.pem</code>
        </p></div></div><p>
      Buildah, Podman and skopeo automatically verifies every image pulled
      from <code class="literal">registry.suse.com</code> from now on. There are no
      additional steps required.
    </p><p>
      If verification fails, the command returns an error message as follows:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman pull registry.suse.com/bci/bci-base:latest
    Trying to pull registry.suse.com/bci/bci-base:latest...
    Error: copying system image from manifest list: Source image rejected: Signature for identity registry.suse.com/bci/bci-base is not accepted</pre></div><p>
      If there are no issues with the signed image and your configuration, you
      can proceed with using the container image.
    </p></section></section><section xml:lang="en" class="sect1" id="container-buildah" data-id-title="Buildah overview"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">17 </span><span class="title-name">Buildah overview</span></span> <a title="Permalink" class="permalink" href="#container-buildah">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    <a class="link" href="https://buildah.io/" target="_blank">Buildah</a> is tool for
    building OCI-compliant container images. Buildah can handle the following
    tasks:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        Create containers from scratch or from existing images.
      </p></li><li class="listitem"><p>
        Create an image from a working container or via a
        <code class="literal">Dockerfile</code>.
      </p></li><li class="listitem"><p>
        Build images in the OCI or Docker Open Source Engine image formats.
      </p></li><li class="listitem"><p>
        Mount a working container's root file system for manipulation.
      </p></li><li class="listitem"><p>
        Use the updated contents of a container's root file system as a file
        system layer to create a new image.
      </p></li><li class="listitem"><p>
        Delete a working container or an image and rename a local container.
      </p></li></ul></div><p>
    Compared to Docker Open Source Engine, Buildah offers the following advantages:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        The tool makes it possible to mount a working container's file system,
        so it becomes accessible by the host.
      </p></li><li class="listitem"><p>
        The process of building container images using Buildah can be
        automated via scripts by using Buildah subcommands instead of a
        <code class="filename">Containerfile</code> or
        <code class="filename">Dockerfile</code>.
      </p></li><li class="listitem"><p>
        Similar to Podman, Buildah does not require a daemon to run and can
        be used by unprivileged users.
      </p></li><li class="listitem"><p>
        It is possible to build images inside a container without mounting the
        Docker socket, which improves security.
      </p></li></ul></div><p>
    Both Podman and Buildah can be used to build container images. While
    Podman makes it possible to build images using Dockerfiles, Buildah
    offers an expanded range of image building options and capabilities.
  </p><section class="sect2" id="sec-buildah-install" data-id-title="Buildah installation"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">17.1 </span><span class="title-name">Buildah installation</span></span> <a title="Permalink" class="permalink" href="#sec-buildah-install">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      To install Buildah, run the command <code class="command">sudo zypper in
      buildah</code>. Run the command <code class="command">buildah --version</code>
      to check whether Buildah has been installed successfully.
    </p><p>
      If you already have Podman installed and set up for use in rootless
      mode, Buildah can be used in an unprivileged environment without any
      further configuration. If you need to enable rootless mode for Buildah,
      run the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo usermod --add-subuids 100000-165535 --add-subgids 100000-165535 USER</pre></div><p>
      This command enables rootless mode for the current user. After running
      the command, log out and log in again to enable the changes.
    </p><p>
      The command above defines a range of local UIDs on the host, onto which
      the UIDs allocated to users inside the container are mapped. Note that
      the ranges defined for different users must not overlap. It is also
      important that the ranges do not reuse the UID of any existing local
      users or groups. By default, adding a user with the
      <code class="command">useradd</code> command on <span class="phrase"><span class="phrase">SUSE Linux</span></span> automatically
      allocates subUID and subGID ranges.
    </p><div id="id-1.18.7.7" data-id-title="Buildah in rootless mode" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Buildah in rootless mode</div><p>
        In rootless mode, Buildah commands must be executed in a modified
        user namespace of the user. To enter this user namespace, run the
        command <code class="command">buildah unshare</code>. Otherwise, the
        <code class="command">buildah mount</code> command will fail.
      </p></div></section><section class="sect2" id="sec-buildah-build-images" data-id-title="Building images with Buildah"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">17.2 </span><span class="title-name">Building images with Buildah</span></span> <a title="Permalink" class="permalink" href="#sec-buildah-build-images">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Instead of a special file with instructions, Buildah uses individual
      commands to build an image. Building an image with Buildah involves the
      following steps:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          run a container based on the specified image
        </p></li><li class="listitem"><p>
          edit the container (install packages, configure settings, etc.)
        </p></li><li class="listitem"><p>
          configure the container options
        </p></li><li class="listitem"><p>
          commit all changes into a new image
        </p></li></ul></div><p>
      While this process may include additional steps, such as mounting the
      container's file system and working with it, the basic workflow logic
      remains the same.
    </p><p>
      The following example can give you a general idea of how to build an
      image with Buildah.
    </p><div class="verbatim-wrap"><pre class="screen">container=$(buildah from suse/sle15) <span class="callout" id="CO3-1">1</span>
    buildah run $container zypper up <span class="callout" id="CO3-2">2</span>
    buildah copy $container . /usr/src/example/ <span class="callout" id="CO3-3">3</span>
    buildah config --workingdir /usr/src/example $container <span class="callout" id="CO3-4">4</span>
    buildah config --port 8000 $container
    buildah config --cmd "php -S 0.0.0.0:8000" $container
    buildah config --label maintainer="Tux" $container <span class="callout" id="CO3-5">5</span>
    buildah config --label version="0.1" $container
    buildah commit $container example <span class="callout" id="CO3-6">6</span>
    buildah rm $container <span class="callout" id="CO3-7">7</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO3-1"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Specify a container (also called a working container) based on the
          specified image (in this case, <code class="literal">sle15</code>).
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO3-2"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Run a command in the working container you just created. In this
          example, Buildah runs the <code class="command">zypper up</code> command.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO3-3"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Copy files and directories to the specified location in the
          container. In this example, Buildah copies the entire contents of
          the current directory to <code class="filename">/usr/src/example/</code>.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO3-4"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          The <code class="command">buildah config</code> commands specify container
          options. These include defining a working directory, exposing a port,
          and running a command inside the container.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO3-5"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          The <code class="command">buildah config --label</code> command allows you to
          assign labels to the container. This may include
          <code class="literal">maintainer</code>, <code class="literal">description</code>,
          <code class="literal">version</code>, and so on.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO3-6"><span class="callout">6</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Create an image from the working container by committing all the
          modifications.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO3-7"><span class="callout">7</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Delete the working container.
        </p></td></tr></table></div></section></section><section xml:lang="en" class="sect1" id="container-build-images" data-id-title="Creating custom container images"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">18 </span><span class="title-name">Creating custom container images</span></span> <a title="Permalink" class="permalink" href="#container-build-images">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To create a custom image, you need a base image of SUSE Linux Enterprise Server. You can use any
    of the pre-built SUSE Linux Enterprise Server images.
  </p><section class="sect2" id="sec-download-prebuild-images" data-id-title="Pulling base SUSE Linux Enterprise Server images"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.1 </span><span class="title-name">Pulling base SUSE Linux Enterprise Server images</span></span> <a title="Permalink" class="permalink" href="#sec-download-prebuild-images">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      To obtain a pre-built base image, use the following command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman pull registry.suse.com/suse/<em class="replaceable">IMAGENAME</em></pre></div><p>
      For example, for SUSE Linux Enterprise Server 15, the command is as follows:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman pull registry.suse.com/suse/sle15</pre></div><p>
      For information on obtaining specific base images, refer to
      <a class="xref" href="#container-bci-intro" title="3. Introduction to SLE Base Container Images">Section 3, “Introduction to SLE Base Container Images”</a>.
    </p><p>
      When the container image is ready, you can customize it as described in
      <a class="xref" href="#sec-customize-images" title="18.2. Customizing container images">Section 18.2, “Customizing container images”</a>.
    </p></section><section class="sect2" id="sec-customize-images" data-id-title="Customizing container images"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">18.2 </span><span class="title-name">Customizing container images</span></span> <a title="Permalink" class="permalink" href="#sec-customize-images">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect3" id="sec-customize-repo-registration" data-id-title="Repositories and Registration"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">18.2.1 </span><span class="title-name">Repositories and Registration</span></span> <a title="Permalink" class="permalink" href="#sec-customize-repo-registration">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        The pre-built images do not have any repositories configured and do not
        include any modules or extensions. They contain a
        <a class="link" href="https://github.com/SUSE/container-suseconnect" target="_blank">zypper
        service</a> that contacts either the SUSE Customer Center or a
        Repository Mirroring Tool (RMT) server, according to the
        configuration of the SUSE Linux Enterprise Server host that runs the container. The service
        obtains the list of repositories available for the product used by the
        container image. You can also directly declare extensions in your
        <code class="literal">Dockerfile</code>. For more information, see
        <a class="xref" href="#sec-container-suseconnect" title="12.3. container-suseconnect">Section 12.3, “container-suseconnect”</a>.
      </p><div id="id-1.19.4.2.3" data-id-title="SLE_BCI repository" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: SLE_BCI repository</div><p>
          The default base image includes the SLE_BCI repository. This
          repository is only used when a container is built or runs on a
          non-registered SLES host, or when registration credentials are not
          made available to the container. The repository provides a subset of
          SLE packages useful for customizing SLES container images. The
          repository is available without any registration, and it is not
          supported.
        </p></div><p>
        You do not need to add any credentials to the container image, because
        the machine credentials are automatically injected into the
        <code class="filename">/run/secrets</code> directory in the container by the
        docker daemon. The same applies to the
        <code class="filename">/etc/SUSEConnect</code> file of the host system, which is
        automatically injected into the <code class="filename">/run/secrets</code>
        directory.
      </p><div id="id-1.19.4.2.5" data-id-title="Credentials and security" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Credentials and security</div><p>
          The contents of the <code class="filename">/run/secrets</code> directory are
          never included in a container image, which means that there is no
          risk of your credentials leaking.
        </p></div><div id="note-build-images-different-codebase" data-id-title="Building images on systems registered with RMT" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Building images on systems registered with RMT</div><p>
          When the host system used for building container images is registered
          with RMT, the default behavior allows only building containers of
          the same code base as the host. For example, if your container host
          is an SLE 15 system, you can only build SLE 15-based images on
          that host by default. To build images for a different SLE version,
          for example, SLE 12 on an SLE 15 host, the host machine
          credentials for the target release can be injected into the container
          as outlined below.
        </p><p>
          Note that if the RMT server is using a self-signed certificate, the
          matching CA certificate needs to be added into the container at
          <code class="filename">CA_TRUSTSTORE/rmt-server.pem</code> for the certificate
          to be accepted.
        </p><p>
          When the host system is registered with SUSE Customer Center, this
          restriction does not apply.
        </p></div><p>
        To obtain the list of repositories, use the following command:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo zypper repos</pre></div><p>
        This automatically adds all the repositories to the container. For each
        repository added to the system, a new file is created under
        <code class="filename">/etc/zypp/repos.d</code> . The URLs of these repositories
        include an access token that automatically expires after 12 hours. To
        renew the token, run the command <code class="command">zypper ref -s</code> .
        Including these files in a container image does not pose any security
        risk.
      </p><p>
        To use a different set of credentials, put a custom
        <code class="filename">/etc/zypp/credentials.d/SCCcredentials</code> file inside
        the container image. It contains the machine credentials that have the
        subscription you want to use. The same applies to the
        <code class="filename">SUSEConnect</code> file: to override the existing file on
        the host system running the container, add a custom
        <code class="filename">/etc/SUSEConnect</code> file inside the container image.
      </p><p>
        Now you can create a custom container image by using a
        <code class="filename">Dockerfile</code> as described in
        <a class="xref" href="#sec-docker-sle-images-customizing-the-images-sles12sp3" title="18.2.2. Creating a custom image for SLE 12 SP5 and later">Section 18.2.2, “Creating a custom image for SLE 12 SP5 and later”</a>.
      </p><p>
        After you have edited the <code class="filename">Dockerfile</code>, build the
        image by running the following command in the directory where the
        <code class="filename">Dockerfile</code> resides:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman build .</pre></div><p>
        For more information about <code class="literal">podman build</code> options, see
        the
        <a class="link" href="https://docs.podman.io/en/latest/markdown/podman-build.1.html" target="_blank">official
        Podman documentation</a> .
      </p></section><section class="sect3" id="sec-docker-sle-images-customizing-the-images-sles12sp3" data-id-title="Creating a custom image for SLE 12 SP5 and later"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">18.2.2 </span><span class="title-name">Creating a custom image for SLE 12 SP5 and later</span></span> <a title="Permalink" class="permalink" href="#sec-docker-sle-images-customizing-the-images-sles12sp3">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        The following <code class="literal">Dockerfile</code> creates a simple container
        image based on SUSE Linux Enterprise Server 15:
      </p><div class="verbatim-wrap"><pre class="screen">FROM registry.suse.com/suse/sle15
    RUN zypper ref -s &amp;&amp; zypper -n in vim &amp;&amp; zypper -n clean</pre></div><p>
        When the Podman host machine is registered with an internal RMT
        server, the image requires the SSL certificate used by RMT:
      </p><div class="verbatim-wrap"><pre class="screen">FROM registry.suse.com/suse/sle15
    # Import the crt file of our private SMT server
    ADD http://smt./smt.crt /etc/pki/trust/anchors/smt.crt
    RUN update-ca-certificates &amp;&amp; \
        zypper ref -s &amp;&amp; \
        zypper -n in vim &amp;&amp; \
        zypper -n clean</pre></div><p>
        If you wish to add SLE extensions and modules to your images, refer
        to <a class="xref" href="#sec-container-suseconnect-modules" title="12.3.3. Adding modules into the container or container Image">Section 12.3.3, “Adding modules into the container or container Image”</a>.
      </p></section><section class="sect3" id="sec-building-public-cloud" data-id-title="Building container images in on-demand SLE instances in the public cloud"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">18.2.3 </span><span class="title-name">Building container images in on-demand SLE instances in the public cloud</span></span> <a title="Permalink" class="permalink" href="#sec-building-public-cloud">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        Building container images on SLE instances that were launched as
        on-demand or pay-as-you-go instances on a public cloud (AWS, GCE, or
        Azure) requires additional steps. To install packages and updates, the
        on-demand public cloud instances are connected to the update
        infrastructure. This infrastructure is based on RMT servers operated
        by SUSE on public cloud providers.
      </p><p>
        Therefore, your machines need to locate the required services and
        authenticate with them. This can be done using the
        <code class="literal">containerbuild-regionsrv</code> service. This service is
        available in the public cloud images provided through the marketplaces
        of public cloud providers. Before building an image, this service must
        be started on the public cloud instance by running the following
        command:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo systemctl start containerbuild-regionsrv</pre></div><p>
        To start it automatically on system boot, enable it:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo systemctl enable containerbuild-regionsrv</pre></div><p>
        The Zypper plug-ins provided by the SLE base images connect to this
        service and retrieve authentication details and information about which
        update server to talk to. For this to work, the container has to be
        built with host networking enabled, for example:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman build --network host build-directory/</pre></div><p>
        Since update infrastructure in the public clouds is based upon RMT,
        the restrictions on building SLE images for SLE versions
        different from the SLE version of the host apply as well (see
        <a class="xref" href="#note-build-images-different-codebase" title="Note: Building images on systems registered with RMT">Note: Building images on systems registered with RMT</a>).
      </p></section></section></section><section xml:lang="en" class="sect1" id="container-build-app-images" data-id-title="Creating application container images"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">19 </span><span class="title-name">Creating application container images</span></span> <a title="Permalink" class="permalink" href="#container-build-app-images">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Applications that are suitable for running inside containers include
    daemons, Web servers, and applications that expose IP ports for
    communications. You can use Podman to automate the building and
    deployment processes by performing the build process inside a container,
    building an image, and then deploying containers based on the image.
  </p><p>
    Running an application inside a container has the following advantages:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        The image with the application is portable across servers running
        different Linux host distributions and versions.
      </p></li><li class="listitem"><p>
        You can share the image of the application using a repository.
      </p></li><li class="listitem"><p>
        You can use different versions of software in the container and on the
        host system, without creating dependency issues.
      </p></li><li class="listitem"><p>
        You can run multiple instances of the same application that are
        independent from each other.
      </p></li></ul></div><p>
    Using Podman to build applications has the following advantages:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        You can prepare an image of the complete build environment.
      </p></li><li class="listitem"><p>
        The application can run in the same environment it was built in.
      </p></li><li class="listitem"><p>
        Developers can test their code in the same environment as used in
        production.
      </p></li></ul></div><p>
    The following section provides examples and recommendations on creating
    container images for applications. Before proceeding, make sure that you
    have activated your SUSE Linux Enterprise Server base image as described in
    <a class="xref" href="#sec-download-prebuild-images" title="18.1. Pulling base SUSE Linux Enterprise Server images">Section 18.1, “Pulling base SUSE Linux Enterprise Server images”</a> .
  </p><section class="sect2" id="sec-application-with-specific-dependencies" data-id-title="Running an application with specific package versions"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.1 </span><span class="title-name">Running an application with specific package versions</span></span> <a title="Permalink" class="permalink" href="#sec-application-with-specific-dependencies">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      If your application needs a version of a package different from the
      package installed on the system, you can create a container image that
      includes the package version the application requires. The following
      example <code class="filename">Dockerfile</code> allows building an image based on
      an up-to-date version of SUSE Linux Enterprise Server with an older version of the
      <span class="package">example</span> package:
    </p><div class="verbatim-wrap"><pre class="screen">FROM registry.suse.com/suse/sle15
    LABEL maintainer=EXAMPLEUSER_PLAIN
    RUN zypper ref &amp;&amp; zypper in -f example-1.0.0-0
    COPY application.rpm /tmp/
    RUN zypper --non-interactive in /tmp/application.rpm
    ENTRYPOINT ["/etc/bin/application"]
    CMD ["-i"]</pre></div><p>
      Build the image by running the following command in the directory that
      the <code class="filename">Dockerfile</code> resides in:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman build --tag tux_application:latest .</pre></div><p>
      The <code class="filename">Dockerfile</code> example shown above performs the
      following operations during the image build process:
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          Updates the SUSE Linux Enterprise Server repositories.
        </p></li><li class="listitem"><p>
          Installs the desired version of the <span class="package">example</span>
          package.
        </p></li><li class="listitem"><p>
          Copies the application package to the image. The binary RPM must be
          placed in the build context.
        </p></li><li class="listitem"><p>
          Unpacks the application.
        </p></li><li class="listitem"><p>
          The last two steps run the application after a container is started.
        </p></li></ol></div><p>
      After a successful build of the <code class="literal">tux_application</code> image,
      you can start a container based on the new image using the following
      command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman run -it --name application_instance tux_application:latest</pre></div><p>
      Keep in mind that after closing the application, the container exits as
      well.
    </p></section><section class="sect2" id="sec-applications-with-configuration" data-id-title="Running an application with a specific configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.2 </span><span class="title-name">Running an application with a specific configuration</span></span> <a title="Permalink" class="permalink" href="#sec-applications-with-configuration">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      To run an instance using a different configuration, create a derived
      image and include the additional configuration with it. In the example
      below, an application called <span class="emphasis"><em>example</em></span> is configured
      using the file <code class="filename">/etc/example/configuration_example</code>:
    </p><div class="verbatim-wrap"><pre class="screen">FROM registry.suse.com/suse/sle15 <span class="callout" id="CO1-1">1</span>
    RUN zypper ref &amp;&amp; zypper --non-interactive in example <span class="callout" id="CO1-2">2</span>
    ENV BACKUP=/backup <span class="callout" id="CO1-3">3</span>
    RUN mkdir -p $BACKUP <span class="callout" id="CO1-4">4</span>
    COPY configuration_example /etc/example/ <span class="callout" id="CO1-5">5</span>
    ENTRYPOINT ["/etc/bin/example"] <span class="callout" id="CO1-6">6</span></pre></div><p>
      The above example <code class="literal">Dockerfile</code> performs the following
      operations:
    </p><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO1-1"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Pulls the <code class="literal">sle15</code> base image as described in
          <a class="xref" href="#sec-download-prebuild-images" title="18.1. Pulling base SUSE Linux Enterprise Server images">Section 18.1, “Pulling base SUSE Linux Enterprise Server images”</a>.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO1-2"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Refreshes repositories and installations of the
          <span class="emphasis"><em>example</em></span>.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO1-3"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Sets a <code class="option">BACKUP</code> environment variable (the variable
          persists to containers started from the image). You can always
          overwrite the value of the variable while running the container by
          specifying a new value.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO1-4"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Creates the directory <code class="filename">/backup</code>.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO1-5"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Copies the <code class="filename">configuration_example</code> to the image.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO1-6"><span class="callout">6</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Runs the <code class="literal">example</code> application.
        </p></td></tr></table></div></section><section class="sect2" id="sec-run-application-with-volumes" data-id-title="Sharing data between an application and the host system"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.3 </span><span class="title-name">Sharing data between an application and the host system</span></span> <a title="Permalink" class="permalink" href="#sec-run-application-with-volumes">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Podman allows sharing data between host and a container by using
      volumes. You can specify a mount point directly in the
      <code class="filename">Dockerfile</code>. However, you cannot specify a directory
      on the host system in the <code class="filename">Dockerfile</code>, as the
      directory may not be accessible at build time. Find the mounted directory
      under <code class="filename">/var/lib/docker/volumes/</code> on the host system.
    </p><div id="id-1.20.10.3" data-id-title="Discarding changes to the directory to be shared" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Discarding changes to the directory to be shared</div><p>
        After you specify a mount point by using the <code class="literal">VOLUME</code>
        instruction, all changes made to the directory with the
        <code class="command">RUN</code> instruction are discarded. After the mount point
        is specified, the volume becomes a part of a temporary container which
        is removed after a successful build. This means that for certain
        actions to take effect, they must be performed
        <span class="strong"><strong>before</strong></span> specifying a mount point. For
        example, if you need to change permissions, do this before you specify
        the directory as a mount point in the <code class="filename">Dockerfile</code>.
      </p></div><p>
      Specify a particular mount point on the host system when running a
      container by using the <code class="option">-v</code> option:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman run -it --name testing -v /home/tux/data:/data sles12sp4:latest /bin/bash</pre></div><div id="id-1.20.10.6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
        The <code class="option">-v</code> option overwrites the <code class="command">VOLUME</code>
        instruction if you specify the same mount point in the container.
      </p></div><p>
      The following <code class="filename">Dockerfile</code> example builds an image
      containing a Web server that reads Web content from the host's file
      system:
    </p><div class="verbatim-wrap"><pre class="screen">FROM registry.suse.com/suse/sles12sp4
    RUN zypper ref &amp;&amp; zypper --non-interactive in apache2
    COPY apache2 /etc/sysconfig/
    RUN chown -R admin /data
    EXPOSE 80
    VOLUME /data
    ENTRYPOINT ["apache2ctl"]</pre></div><p>
      The example above installs the Apache Web server to the image and copies
      the entire configuration to the image. The <code class="literal">data</code>
      directory is owned by the <span class="emphasis"><em>admin</em></span> user and is used as
      a mount point to store Web pages.
    </p></section><section class="sect2" id="sec-docker-daemons" data-id-title="Applications running in the background"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">19.4 </span><span class="title-name">Applications running in the background</span></span> <a title="Permalink" class="permalink" href="#sec-docker-daemons">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      If your application needs to run in the background as a daemon, or as an
      application exposing ports for communication, you can run the container
      in the background.
    </p><p>
      An example <code class="filename">Dockerfile</code> for an application exposing a
      port is as follows:
    </p><div class="verbatim-wrap"><pre class="screen" id="ex-docker-dockerfile-apache2">FROM registry.suse.com/suse/sle15 <span class="callout" id="CO2-1">1</span>
    LABEL maintainer=<em class="replaceable">EXAMPLEUSER_PLAIN</em> <span class="callout" id="CO2-2">2</span>
    ADD etc/ /etc/zypp/ <span class="callout" id="CO2-3">3</span>
    RUN zypper refs &amp;&amp; zypper refresh <span class="callout" id="CO2-4">4</span>
    RUN zypper --non-interactive in apache2 <span class="callout" id="CO2-5">5</span>
    RUN echo "The Web server is running" <code class="prompt user">&gt; </code>/srv/www/htdocs/test.html <span class="callout" id="CO2-6">6</span>
    # COPY data/* /srv/www/htdocs/ <span class="callout" id="CO2-7">7</span>
    EXPOSE 80 <span class="callout" id="CO2-8">8</span>
    ENTRYPOINT ["/usr/sbin/httpd"]
    CMD ["-D", "FOREGROUND"]</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO2-1"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Pull the base image as described in
          <a class="xref" href="#sec-download-prebuild-images" title="18.1. Pulling base SUSE Linux Enterprise Server images">Section 18.1, “Pulling base SUSE Linux Enterprise Server images”</a>.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO2-2"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Maintainer of the image (optional).
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO2-3"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          The repositories and service files to be copied to
          <code class="filename">/etc/zypp/repos.d</code> and
          <code class="filename">/etc/zypp/services.d</code>. This makes them available
          on the host in the container.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO2-4"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Command to refresh repositories and services.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO2-5"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Command to install Apache2.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO2-6"><span class="callout">6</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          Test line for debugging purposes. This line can be removed if
          everything works as expected.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO2-7"><span class="callout">7</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          A <code class="command">COPY</code> instruction to copy data from the host
          system to the directory in the container used by the server. The
          leading hash character ( <code class="literal">#</code> ) marks this line as a
          comment; it is not executed.
        </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#CO2-8"><span class="callout">8</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
          The exposed port for the Apache Web server.
        </p></td></tr></table></div><div id="id-1.20.11.6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
        To use port 80, make sure there is no other server software running on
        this port on the host.
      </p></div><p>
      To use the container, proceed as follows:
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          Prepare the host system for the build process.
        </p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>
              Make sure the host system is subscribed to the Server
              Applications Module of SUSE Linux Enterprise Server. To view installed modules or
              install additional modules, open YaST and select Add System
              Extensions or Modules.
            </p></li><li class="listitem"><p>
              Make sure the SLE images from the SUSE Registry are installed
              as described in <a class="xref" href="#sec-download-prebuild-images" title="18.1. Pulling base SUSE Linux Enterprise Server images">Section 18.1, “Pulling base SUSE Linux Enterprise Server images”</a>.
            </p></li><li class="listitem"><p>
              Save the <code class="filename">Dockerfile</code> in the
              <code class="filename">docker</code> directory.
            </p></li><li class="listitem"><p>
              Within the container, you need access to software repositories
              and services that are registered on the host. To make them
              available, copy repositories and service files from the host to
              the <code class="filename">docker/etc</code> directory:
            </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>cd docker
    <code class="prompt user">&gt; </code>mkdir etc
    <code class="prompt user">&gt; </code>sudo cp -a /etc/zypp/{repos.d,services.d} etc/</pre></div><p>
              Instead of copying all repository and service files, you can also
              copy only the subset that is required by the container.
            </p></li><li class="listitem"><p>
              Add Web site data (such as HTML files) into the
              <code class="filename">docker/data</code> directory. The contents of this
              directory are copied to the container image and are thus
              published by the Web server.
            </p></li></ol></div></li><li class="listitem"><p>
          Build the container. Set a tag for your image with the
          <code class="option">-t</code> option (in the command below, it is
          <em class="replaceable">EXAMPLEUSER_PLAIN</em>):
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>docker build -t <em class="replaceable">EXAMPLEUSER_PLAIN</em>/apache2 .</pre></div><p>
          Docker Open Source Engine executes the instructions provided in the
          <code class="filename">Dockerfile</code>: pull the base image, copy content,
          refresh repositories, install the Apache2, etc.
        </p></li><li class="listitem"><p>
          Start a container instance from the image created in the previous
          step:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>docker run --detach --interactive --tty <em class="replaceable">EXAMPLEUSER_PLAIN</em>/apache2</pre></div><p>
          Docker Open Source Engine returns the container ID, for example:
        </p><div class="verbatim-wrap"><pre class="screen">7bd674eb196d330d50f8a3cfc2bc61a243a4a535390767250b11a7886134ab93</pre></div></li><li class="listitem"><p>
          Point a browser to
          <a class="link" href="http://localhost:80/test.html" target="_blank">http://localhost:80/test.html</a>
          . You should see the message <span class="emphasis"><em>The Web server is
          running</em></span>.
        </p></li><li class="listitem"><p>
          To see an overview of running containers, run the <code class="command">docker ps
          --latest</code> command:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>docker ps --latest
    CONTAINER ID        IMAGE               COMMAND                  [...]
    7bd674eb196d
    tux/apache2         "/usr/sbin/httpd -..."   [...]</pre></div><p>
          To stop and delete the container, run the following command:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>docker rm --force 7bd674eb196d</pre></div></li></ol></div><p>
      You can use the resulting container to serve your data with the Apache2
      Web server by following these steps:
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          In the <code class="filename">Dockerfile</code> :
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
              In the example <code class="filename">Dockerfile</code>, comment the line
              that starts with <code class="literal">RUN echo</code> by adding a
              <code class="literal">#</code> character at its beginning.
            </p></li><li class="listitem"><p>
              In the example <code class="filename">Dockerfile</code>, uncomment the
              line starting with <code class="literal">COPY</code> by removing the
              leading <code class="literal">#</code> character.
            </p></li></ul></div></li><li class="listitem"><p>
          Rebuild the image.
        </p></li><li class="listitem"><p>
          Run the image in detached mode:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>docker run --detach --interactive --tty <em class="replaceable">EXAMPLEUSER_PLAIN</em>/apache2</pre></div><p>
          Docker Open Source Engine responds with the container ID, for example:
        </p><div class="verbatim-wrap"><pre class="screen">e43fff4ae9832ecdb7677c058a73039d7610c32145a1d9b6ad0a4ed52b5c4dc7</pre></div></li></ol></div><p>
      To view the published data, point a browser at
      <a class="link" href="http://localhost:80/test.html" target="_blank">http://localhost:80/test.html</a>
      .
    </p><p>
      To avoid copying Web site data into the container, share a directory of
      the host with the container. For more information, see
      <a class="link" href="https://docs.docker.com/storage/volumes/" target="_blank">https://docs.docker.com/storage/volumes/</a>
      .
    </p></section></section><section xml:lang="en" class="sect1" id="container-orchestration" data-id-title="Container orchestration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">20 </span><span class="title-name">Container orchestration</span></span> <a title="Permalink" class="permalink" href="#container-orchestration">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>In a production environment, you are likely to manage multiple containers. To work with multiple containers, you
    have to group the containers into a pod that provides a specification for deploying and running the containers as well as allows them to share storage and network resources. In other words, a pod
    encapsulates an application composed of multiple containers into a single unit. The concept of pod was
    introduced by <a class="link" href="https://kubernetes.io/docs/concepts/workloads/pods/" target="_blank">Kubernetes</a>. Podman uses the same definition as Kubernetes.</p><p>Usually, containers within a pod can communicate directly with each other. Each pod contains an
      infrastructure container (INFRA), whose purpose is to hold the namespace. INFRA also enables Podman
      to add other containers to the pod. Port bindings, cgroup-parent values and kernel namespaces are
      all assigned to the infrastructure container. Therefore, you cannot change any of these values later.</p><div class="informalfigure"><div class="mediaobject"><a href="images/pods_architecture.png"><img src="images/pods_architecture.png" width="80.0%" alt="image" title="image"/></a></div></div><p>Each container in a pod has its own instance of a monitoring program. The monitoring program watches
      the container's process and if the container dies, the monitoring program saves its exit code. The
      program also holds open the tty interface for the particular container. The monitoring program
      enables you to run containers in the detached mode when Podman exits, because this program continues
      to run and enables you to attach tty later.</p><section class="sect2" id="sec-orchestration-podman" data-id-title="Single container host with Podman"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">20.1 </span><span class="title-name">Single container host with Podman</span></span> <a title="Permalink" class="permalink" href="#sec-orchestration-podman">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p><code class="command">podman pod</code> is the command-line tool for creating, removing, querying and inspecting pods. You can
    check all the subcommands of <code class="command">podman pod</code> in the
    <a class="link" href="https://docs.podman.io/en/latest/markdown/podman-pod.1.html" target="_blank">official upstream documentation</a>.</p><p><code class="command">podman pod create</code> creates a pod with a random name. You can use the <code class="option">--name</code> parameter to
    assign the desired name to a pod.</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman pod create
    344940492c00b6a19ececbc5b109351bf0a3b8b19b3c279a097da7a653c592d0</pre></div><p>you can list our pods using the <code class="command">podman pod list</code> command:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman pod list
    POD ID        NAME          STATUS      CREATED        INFRA ID      # OF CONTAINERS
    344940492c00  suspicious_curie  Created     2 minutes ago  617d7e3ce399  1</pre></div><p>You can also list all containers with the pods they are associated with:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman ps -a --pod
    CONTAINER ID  IMAGE                 COMMAND     CREATED        STATUS      PORTS       NAMES               POD ID        PODNAME
    617d7e3ce399  localhost/podman-pause:4.3.1-1669118400              5 minutes ago  Created                 344940492c00-infra  344940492c00  suspicious_curie</pre></div><p>The created pod has an infra container identified by the <code class="literal">localhost/podman-pause:4.x</code> name. The
    purpose of this container is to reserve the namespaces associated with the pod and allow Podman to
    add other containers to the pod.</p><p>Using the <code class="command">podman run --pod</code> command, you can run a container and add it to the desired pod. For
    example, the command below runs a container based on the <span class="package">suse/sle15</span> image and adds the container to
    the <code class="literal">suspicious_curie</code> pod:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman run -d --pod suspicious_curie registry.suse.com/bci/bci-base sleep 1h
    8f5af62a7c385bbd1a3a5cc3a53a8d0f8cf942adc26a065960d4232fcc93ac98</pre></div><div id="id-1.21.6.12" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning</div><p>If this command shows the following warning,  refer to
    <a class="link" href="http://https//documentation.suse.com/container/all/single-html/SLES-container/#sec-bci-suseconnect-podman-buildah-nerdctl" target="_blank">Using container-suseconnect on non-SLE hosts or with Podman, Buildah, and nerdctl</a>:</p></div><div class="verbatim-wrap"><pre class="screen">WARN[0005] Path "/etc/SUSEConnect" from "/etc/containers/mounts.conf" doesn't exist, skipping
    WARN[0005] Failed to mount subscriptions, skipping entry in /etc/containers/mounts.conf: open /etc/zypp/credentials.d/SCCcredentials: permission denied</pre></div><p>The command above adds a container that sleeps for 60 minutes and then exits. Run the <code class="command">podman ps -a --pod</code> command again and you should see that the pod now has two containers.</p><p>You can also check the command <code class="command">podman pod ps</code>:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman pod ps
    POD ID        NAME          STATUS      CREATED         INFRA ID      # OF CONTAINERS
    344940492c00  suspicious_curie Running     21 minutes ago  617d7e3ce399  2</pre></div><p>To stop our newly created container named <code class="literal">objective_jemison</code></p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman ps -a --pod
    CONTAINER ID  IMAGE                                COMMAND     CREATED         STATUS            PORTS       NAMES               POD ID        PODNAME
    617d7e3ce399  localhost/podman-pause:4.3.1-1669118400                             14 minutes ago  Up 4 minutes ago              344940492c00-infra  344940492c00  suspicious_curie 8f5af62a7c38  registry.suse.com/bci/bci-base:latest  sleep 1h    4 minutes ago   Up 4 minutes ago              objective_jemison   344940492c00  suspicious_curie
    <code class="prompt user">&gt; </code>podman stop objective_jemison
    objective_jemison
    <code class="prompt user">&gt; </code>podman pod ps
    POD ID        NAME          STATUS      CREATED         INFRA ID      # OF CONTAINERS
    344940492c00  suspicious_curie  Degraded    25 minutes ago  617d7e3ce399  2
    <code class="prompt user">&gt; </code>podman ps -a --pod
    CONTAINER ID  IMAGE                                COMMAND     CREATED         STATUS                       PORTS       NAMES               POD ID        PODNAME
    617d7e3ce399  localhost/podman-pause:4.3.1-1669118400                             25 minutes ago  Up 15 minutes ago                        344940492c00-infra  344940492c00  suspicious_curie 8f5af62a7c38  registry.suse.com/bci/bci-base:latest  sleep 1h    15 minutes ago  Exited (137) 14 seconds ago              objective_jemison   344940492c00  suspicious_curie</pre></div><p>You can also stop the pod and all of its containers using, podman pod stop</p><div class="verbatim-wrap"><pre class="screen"># podman pod stop suspicious_curie
    344940492c00b6a19ececbc5b109351bf0a3b8b19b3c279a097da7a653c592d0
    <code class="prompt user">&gt; </code>podman ps -ap
    CONTAINER ID  IMAGE                                COMMAND     CREATED         STATUS                      PORTS       NAMES               POD ID        PODNAME
    617d7e3ce399  localhost/podman-pause:4.3.1-1669118400                             29 minutes ago  Exited (0) 7 seconds ago                344940492c00-infra  344940492c00  suspicious_curie 8f5af62a7c38  registry.suse.com/bci/bci-base:latest  sleep 1h    19 minutes ago  Exited (137) 3 minutes ago              objective_jemison   344940492c00  suspicious_curie</pre></div><p>You can also start and restart everything with <code class="command">sudo podman start <em class="replaceable">CONTAINER_NAME</em></code>,
    <code class="command">podman pod start <em class="replaceable">POD_NAME</em></code> or <code class="command">podman pod restart <em class="replaceable">POD_NAME</em></code> .</p><p>There are two ways to remove pods. You can use the <code class="command">podman pod rm</code> command to remove one or more pods.
    Alternatively, you can remove all stopped pods using the <code class="command">podman pod prune</code> command.
    To remove a pod or several pods, run the <code class="command">podman pod rm</code> command as follows:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman pod rm <em class="replaceable">POD</em></pre></div><p>POD can be a pod name or a pod ID.
    To remove all currently stopped pods, use the <code class="command">podman pod prune</code> command. Make sure that all stopped
    pods are intended to be removed before you run the <code class="command">podman pod prune</code> command, otherwise there is a risk of removing pods that are still in use.</p><p>A container runtime makes it easy to launch an application distributed as a
    single container. But things get more complicated when you need to run
    applications consisting of multiple containers, or when it's necessary to start
    the applications automatically on system boot and restart them after they
    crash. While container orchestration tools like Kubernetes are designed for that
    exact purpose, they are intended to be used for highly distributed and scalable
    systems with hundreds of nodes, and not for a single machine. systemd and Podman
    are much better suited for the single-machine scenario, as they do not add
    another layer complexity to your existing setup.</p><p>Podman supports creating systemd unit files with
    the <code class="command">podman generate systemd</code> subcommand. The subcommand creates a systemd unit
    file, making it possible to control a container or pod via systemd. Using the
    unit file you can launch a container or pod on boot, automatically restart it if
    a failure occurs, and keep its logs in journald.</p><p>The following example uses a simple NGINX container:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman run -d --name web -p 8080:80 docker.io/nginx
    c0148d8476418a2da938a711542c55efc09e4119909aea70e287465c6fb51618</pre></div><p>Generating a systemd unit for the container can be done as follows:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman generate systemd --name --new web
    # container-web.service
    # autogenerated by Podman 4.2.0
    # Tue Sep 13 10:58:54 CEST 2022
    
    [Unit]
    Description=Podman container-web.service
    Documentation=man:podman-generate-systemd(1)
    Wants=network-online.target
    After=network-online.target
    RequiresMountsFor=%t/containers
    
    [Service]
    Environment=PODMAN_SYSTEMD_UNIT=%n
    Restart=on-failure
    TimeoutStopSec=70
    ExecStartPre=/bin/rm -f %t/%n.ctr-id
    ExecStart=/usr/bin/podman run \
            --cidfile=%t/%n.ctr-id \
            --cgroups=no-conmon \
            --rm \
            --sdnotify=conmon \
            --replace \
            -d \
            --name web \
            -p 8080:80 docker.io/nginx
    ExecStop=/usr/bin/podman stop --ignore --cidfile=%t/%n.ctr-id
    ExecStopPost=/usr/bin/podman rm -f --ignore --cidfile=%t/%n.ctr-id
    Type=notify
    NotifyAccess=all
    
    [Install]
    WantedBy=default.target</pre></div><p>Podman outputs a unit file to the console that can be put either into the user
    unit systemd directories (<code class="filename">~/.config/systemd/user/</code> or <code class="filename">/etc/systemd/user/</code>) or
    into the system unit systemd directory (<code class="filename">/etc/systemd/system</code>) and control the
    container via systemd. The <code class="option">--new</code> flag instructs Podman to recreate the
    container on a restart. This ensures that the systemd unit is self-contained,
    and it does not depend on external state. The <code class="option">--name</code> flag allows you to assign
    a user-friendly name to the container: without it Podman uses container IDs
    instead of their names.</p><p>To control the container as a user unit, proceed as follows:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman generate systemd --name --new --files web
    /home/user/container-web.service
    <code class="prompt user">&gt; </code>mv container-web.service ~/.config/systemd/user/
    <code class="prompt user">&gt; </code>systemctl --user daemon-reload</pre></div><p>Now the container can be started with <code class="command">systemctl --user start container-web</code>:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>systemctl --user start container-web
    <code class="prompt user">&gt; </code>systemctl --user is-active container-web.service
    active</pre></div><p>Run the <code class="command">podman ps</code> command to see the list of all running containers :</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman ps
    CONTAINER ID  IMAGE                           COMMAND               CREATED         STATUS             PORTS                 NAMES
    af92743971d2  docker.io/library/nginx:latest  nginx -g daemon o...  15 minutes ago  Up 15 minutes ago  0.0.0.0:8080-&gt;80/tcp  web</pre></div><p>One of the benefits of managing the container via systemd is the ability to
    automatically restart the container if it crashes. You can simulate a crash by
    sending <code class="literal">SIGKILL</code> to the main process in the container:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman ps
    CONTAINER ID  IMAGE                           COMMAND               CREATED             STATUS                 PORTS                 NAMES
    4c89582fa9cb  docker.io/library/nginx:latest  nginx -g daemon o...  About a minute ago  Up About a minute ago  0.0.0.0:8080-&gt;80/tcp  web
    
    <code class="prompt user">&gt; </code>kill -9 $(podman inspect --format "{{.State.Pid}}" web)
    
    <code class="prompt user">&gt; </code>podman ps
    CONTAINER ID  IMAGE                           COMMAND               CREATED        STATUS            PORTS                 NAMES
    0b5be4493251  docker.io/library/nginx:latest  nginx -g daemon o...  4 seconds ago  Up 4 seconds ago  0.0.0.0:8080-&gt;80/tcp  web</pre></div><p>Note that the container is <span class="strong"><strong>not</strong></span> restarted when it is stopped gracefully,
    e.g. via <code class="command">podman stop web</code>. To always restart it, add the flag
    <code class="option">--restart-policy=always</code> to <code class="command">podman generate systemd</code>.</p></section><section class="sect2" id="id-updating-container-images" data-id-title="Updating container images"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">20.2 </span><span class="title-name">Updating container images</span></span> <a title="Permalink" class="permalink" href="#id-updating-container-images">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>Using the described approach means that the container image is never
    updated. You can solve the problem by adding the <code class="option">--pull=always</code> flag to the
    <code class="option">ExecStart=</code> entry in the unit file. But be aware that this increases the
    startup time of the container and updates the image on <span class="strong"><strong>every</strong></span> restart. The
    latter also means that a container image update can make the container
    unavailable outside of a scheduled maintenance window due to a newly
    introduced bug.</p><p>The
    <a class="link" href="https://docs.podman.io/en/latest/markdown/podman-auto-update.1.html" target="_blank"><code class="command">auto-update</code></a>
    subcommand in Podman provides a possible solution. Add the label
    <code class="option">io.containers.autoupdate=registry</code> to a container to make Podman pull a new
    version of the container image from the registry when running <code class="command">podman
    auto-update</code>. This makes it possible to update all container images with a
    single command at a desired time, and without increasing the startup time of the
    systemd units.</p><p>The auto update feature can be enabled by adding the line <code class="option">--label
    "io.containers.autoupdate=registry" \</code> to the <code class="option">ExecStart=</code> entry of the
    container's systemd unit file. for the NGINX example, modify
    <code class="literal">~/.config/systemd/user/container-web.service</code> as follows:</p><div class="verbatim-wrap"><pre class="screen">ExecStart=/usr/bin/podman run \
            --cidfile=%t/%n.ctr-id \
            --cgroups=no-conmon \
            --rm \
            --sdnotify=conmon \
            --replace \
            -d \
            --name web \
            --label "io.containers.autoupdate=registry" \
            -p 8080:80 docker.io/nginx</pre></div><p>After reloading the daemons and restarting the container, perform a dry
    run of the update (it will most likely not report any updates):</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman auto-update --dry-run
    UNIT                   CONTAINER           IMAGE            POLICY      UPDATED
    container-web.service  87d263489307 (web)  docker.io/nginx  registry    false</pre></div><p>It is good practice to have external testing in place to make sure that image
    updates are generally safe to be deployed. If you are confident in the quality
    of our container image, you can let Podman automatically apply image updates
    periodically by enabling the <code class="option">podman-auto-update.timer</code>:</p><div class="verbatim-wrap"><pre class="screen"># only for the current user
    <code class="prompt user">&gt; </code>systemctl --user enable podman-auto-update.timer
    Created symlink /home/user/.config/systemd/user/timers.target.wants/podman-auto-update.timer → /usr/lib/systemd/user/podman-auto-update.timer.
    # or as root
    <code class="prompt user">&gt; </code>sudo systemctl enable podman-auto-update.timer
    Created symlink /etc/systemd/system/timers.target.wants/podman-auto-update.timer → /usr/lib/systemd/system/podman-auto-update.timer.</pre></div></section><section class="sect2" id="id-managing-multiple-containers" data-id-title="Managing multiple containers"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">20.3 </span><span class="title-name">Managing multiple containers</span></span> <a title="Permalink" class="permalink" href="#id-managing-multiple-containers">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>Certain applications rely on more than one container to function, for example, a
    web front-end, a back-end server and a
    database. <a class="link" href="https://docs.docker.com/compose/" target="_blank">Docker compose</a> is popular tool for
    deploying multi-container applications on a single machine. While Podman does
    not support the <code class="command">compose</code> command natively, in most cases compose files can be
    ported to a Podman pod and multiple containers.</p><p>The following example deploys a Drupal and PostgreSQL container in a single pod
    and manages these via systemd units. First, create a new pod that exposes the
    Drupal web interface:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman pod create -p 8080:80 --name drupal
    736cab072c49e68ad368ba819e9117be13ef8fa048a2eb88736b5968b3a19a64</pre></div><p>Once the pod has been created, launch the Drupal front-end and the
    PostgreSQL database inside it:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman run -d --name drupal-frontend --pod drupal docker.io/drupal
    ffd2fbd6d445e63fb0c28abb8d25ced78f819211d3bce9d6174fe4912d89f0ca
    
    <code class="prompt user">&gt; </code>podman run -d --name drupal-pg --pod drupal \
          -e POSTGRES_DB=drupal \
          -e POSTGRES_USER=user \
          -e POSTGRES_PASSWORD=pass \
          docker.io/postgres:11
    a4dc31b24000780d9ffd81a486d0d144c47c3adfbecf0f7effee24a00273fcde</pre></div><p>This results in three running containers: the Drupal web interface, the
    PostgreSQL database and the pod's infrastructure container.</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman ps
    CONTAINER ID  IMAGE                                    COMMAND               CREATED             STATUS                 PORTS                 NAMES
    2948fa1476c6  localhost/podman-pause:4.2.0-1660228937                        2 minutes ago       Up About a minute ago  0.0.0.0:8080-&gt;80/tcp  736cab072c49-infra
    ffd2fbd6d445  docker.io/library/drupal:latest          apache2-foregroun...  About a minute ago  Up About a minute ago  0.0.0.0:8080-&gt;80/tcp  drupal-frontend
    a4dc31b24000  docker.io/library/postgres:11            postgres              40 seconds ago      Up 41 seconds ago      0.0.0.0:8080-&gt;80/tcp  drupal-pg</pre></div><p>Creating a systemd unit for the pod is done similar to a
    single container:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman generate systemd --name --new --files drupal
    /home/user/pod-drupal.service
    /home/user/container-drupal-frontend.service
    /home/user/container-drupal-pg.service
    <code class="prompt user">&gt; </code>mv *service ~/.config/systemd/user/
    <code class="prompt user">&gt; </code>systemctl daemon-reload --user</pre></div><p>Since Podman is aware of which containers belong to the <code class="literal">drupal</code> pod and how
    their systemd units are called, it can correctly add the dependencies to the
    pod's unit file. This means that when you start or stop the pod, systemd ensures
    that all containers inside the pod are started or stopped automatically.</p><p>To check systemd's dependency handling, first stop the <code class="literal">drupal</code> pod and verify
    that no containers are currently running on the host:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>podman pod stop drupal
    736cab072c49e68ad368ba819e9117be13ef8fa048a2eb88736b5968b3a19a64
    <code class="prompt user">&gt; </code>podman pod rm drupal
    736cab072c49e68ad368ba819e9117be13ef8fa048a2eb88736b5968b3a19a64
    <code class="prompt user">&gt; </code>podman ps -a
    CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES</pre></div><p>Start the <code class="literal">drupal</code> pod via <code class="command">systemctl start --user pod-drupal.service</code>, and
    systemd launches the containers inside the pod:</p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>systemctl start --user pod-drupal.service
    <code class="prompt user">&gt; </code>podman ps
    CONTAINER ID  IMAGE                                    COMMAND               CREATED        STATUS            PORTS                 NAMES
    d1589d3ac68b  localhost/podman-pause:4.2.0-1660228937                        5 seconds ago  Up 5 seconds ago  0.0.0.0:8080-&gt;80/tcp  ca41b505bd13-infra
    a49bea53c20c  docker.io/library/postgres:11            postgres              4 seconds ago  Up 5 seconds ago  0.0.0.0:8080-&gt;80/tcp  drupal-pg
    dc9dca018dad  docker.io/library/drupal:latest          apache2-foregroun...  4 seconds ago  Up 5 seconds ago  0.0.0.0:8080-&gt;80/tcp  drupal-frontend</pre></div></section><section class="sect2" id="sec-orchestration-podman-more" data-id-title="More on Podman"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">20.4 </span><span class="title-name">More on Podman</span></span> <a title="Permalink" class="permalink" href="#sec-orchestration-podman-more">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>If you want to learn more about Podman and handling pod deployment,
    please check <a class="link" href="https://docs.podman.io/en/latest/" target="_blank">https://docs.podman.io/en/latest/</a> and <a class="link" href="https://github.com/containers/podman" target="_blank">https://github.com/containers/podman</a></p></section><section class="sect2" id="sec-orchestration-kubernetes" data-id-title="Multi-container host with Kubernetes"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">20.5 </span><span class="title-name">Multi-container host with Kubernetes</span></span> <a title="Permalink" class="permalink" href="#sec-orchestration-kubernetes">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p><a class="link" href="https://kubernetes.io" target="_blank">Kubernetes</a> is an open source container orchestration engine for automating deployment, scaling and
    management of containerized applications. The open source project is hosted by the Cloud Native
    Computing Foundation (<a class="link" href="https://www.cncf.io/about" target="_blank">CNCF</a>).</p><p>Kubernetes makes it possible for multiple machines (or servers or nodes) to work together and create a cluster that you can
    then interact with through APIs. We recommend using <a class="link" href="https://ranchermanager.docs.rancher.com" target="_blank">Rancher</a> for deploying Kubernetes clusters and managing applications running on top of them. A single Rancher setup can manage multiple Kubernetes clusters running anywhere: from bare-metal, to on-prem or cloud service providers.</p><p>For more information on Ranger, refer to the <a class="link" href="https://ranchermanager.docs.rancher.com" target="_blank">official Rancher documentation</a>.</p></section><section class="sect2" id="sec-k3s" data-id-title="Lightweight Kubernetes (k3s)"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">20.6 </span><span class="title-name">Lightweight Kubernetes (k3s)</span></span> <a title="Permalink" class="permalink" href="#sec-k3s">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p><a class="link" href="https://k3s.io" target="_blank">K3s</a> is lightweight CNCF-certified Kubernetes distribution
    built for IoT &amp; Edge computing. Unlike Kubernetes K3s is packaged as a single &lt;60 MB binary and
    optimized for the Arm architecture.</p><p>For more info, refer to
    <a class="link" href="https://www.suse.com/c/rancher_blog/introduction-to-k3s/" target="_blank">Introduction to K3s</a> and
    <a class="link" href="https://documentation.suse.com/trd/kubernetes/single-html/kubernetes_ri_rancher-k3s-sles/index.html#id-introduction" target="_blank">how to install K3s and Rancher on SUSE Linux Enterprise Server</a></p></section></section><section xml:lang="en" class="sect1" id="container-support" data-id-title="Compatibility and support conditions"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">21 </span><span class="title-name">Compatibility and support conditions</span></span> <a title="Permalink" class="permalink" href="#container-support">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The term "support" refers to two distinct concepts: a) technical enablement
    of a feature or combination of, for example, host and container, and b)
    enterprise support as delivered by SUSE to SUSE customers. Enterprise
    support requires a subscription for SUSE products according to
    <a class="link" href="https://www.suse.com/products/terms_and_conditions.pdf" target="_blank">https://www.suse.com/products/terms_and_conditions.pdf</a>.
    Technical enablement is described below.
  </p><section class="sect2" id="sec-sle-container-non-sle-host-support" data-id-title="Support for SLES hosts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">21.1 </span><span class="title-name">Support for SLES hosts</span></span> <a title="Permalink" class="permalink" href="#sec-sle-container-non-sle-host-support">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Consult the following support and compatibility matrix to make sure that
      the desired host system and container combination is compatible and
      supported.
    </p><div class="table" id="id-1.22.3.3" data-id-title="Support matrix"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 2: </span><span class="title-name">Support matrix </span></span><a title="Permalink" class="permalink" href="#id-1.22.3.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">Host ↓ Container image →</th><th style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">SLES 12</th><th style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">SLES 15</th></tr></thead><tbody><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <span class="strong"><strong>SLES 12 SP5</strong></span>
              </p>
            </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                ✓
              </p>
            </td><td style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">
              <p>
                ❋
              </p>
            </td></tr><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <span class="strong"><strong>SLES 15</strong></span>
              </p>
            </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                ✓
              </p>
            </td><td style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">
              <p>
                ✓
              </p>
            </td></tr><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; ">
              <p>
                <span class="strong"><strong>SLE Micro</strong></span>
              </p>
            </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; ">
              <p>
                ✓
              </p>
            </td><td style="text-align: center; vertical-align: top; ">
              <p>
                ✓
              </p>
            </td></tr></tbody></table></div></div><p>
      ✓ Fully supported
    </p><p>
      ❋ Limited support (see the Limited support note)
    </p><div id="id-1.22.3.6" data-id-title="Limited support note" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Limited support note</div><p>
        SUSE provides limited support for SLES 15 GA-based containers
        running on SLES 12 SP5 hosts due to the fact that containerized
        applications can make system calls not available in the host's kernel.
        To avoid potential risks and compatibility problems, SUSE recommends
        using the same Service Pack release for both containers and hosts.
      </p></div><p>
      SLE BCIs support the following architectures: AMD64/Intel 64, AArch64, POWER,
      and IBM Z. Container architecture must match the architecture of the
      host. Mismatching container and host scenarios are not supported.
    </p><p>
      In most scenarios, all SLE containers are expected to be interoperable
      if the application or its dependencies do not interact directly with
      kernel version-specific data structures (<code class="literal">ioctl</code>,
      <code class="literal">/proc</code>, <code class="literal">/sys</code>,
      <code class="literal">routing</code>, <code class="literal">iptables</code>,
      <code class="literal">nftables</code>, <code class="literal">eBPF</code>, etc.) or modules
      (KVM, OVS, SystemTap, etc.). Support for <code class="literal">ioctl</code> and
      access to <code class="literal">/proc</code> is limited to the most common
      scenarios needed by unprivileged users.
    </p></section><section class="sect2" id="sec-sle-container-sle-host-support" data-id-title="Support for non-SLES hosts"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">21.2 </span><span class="title-name">Support for non-SLES hosts</span></span> <a title="Permalink" class="permalink" href="#sec-sle-container-sle-host-support">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      While SUSE-based containers are fully supported, issues in the host
      environment must be handled by the host environment vendor. SUSE
      supports components that are part of the SUSE base containers. Packages
      from SUSE repositories are also supported. Additional components and
      applications in the containers are not covered by SUSE support. A
      SLE subscription is required for building derived containers.
    </p><p>
      Containers based on SLES 12 SP5 and SLES 15 (all service packs) are
      supported according to their official lifecycles and the following table.
    </p><p>
      <span class="strong"><strong>The following third-party container host
      platforms are supported.</strong></span>
    </p><div class="table" id="id-1.22.4.5" data-id-title="Support for non-SLES hosts"><div class="title-container"><div class="table-title-wrap"><div class="table-title"><span class="title-number-name"><span class="title-number">Table 3: </span><span class="title-name">Support for non-SLES hosts </span></span><a title="Permalink" class="permalink" href="#id-1.22.4.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div><div class="table-contents"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><th style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">Container host platform</th><th style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">Container runtime</th><th style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">Support status</th></tr></thead><tbody><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <span class="strong"><strong>Rancher Kubernetes Engine
                (RKE)</strong></span>
              </p>
            </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                docker
              </p>
            </td><td style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">
              <p>
                ✓
              </p>
            </td></tr><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <span class="strong"><strong>Rancher Kubernetes Engine 2
                (RKE2)</strong></span>
              </p>
            </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                containerd
              </p>
            </td><td style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">
              <p>
                ✓
              </p>
            </td></tr><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <span class="strong"><strong>K3S</strong></span>
              </p>
            </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                containerd
              </p>
            </td><td style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">
              <p>
                ✓
              </p>
            </td></tr><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <span class="strong"><strong>Red Hat OpenShift</strong></span>
              </p>
            </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                cri-o
              </p>
            </td><td style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">
              <p>
                ✓
              </p>
            </td></tr><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <span class="strong"><strong>Microsoft Azure Kubernetes Service
                (AKS)</strong></span>
              </p>
            </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                containerd
              </p>
            </td><td style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">
              <p>
                ✓
              </p>
            </td></tr><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <span class="strong"><strong>Google Kubernetes Engine
                (GKE)</strong></span>
              </p>
            </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                containerd
              </p>
            </td><td style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">
              <p>
                ❋
              </p>
            </td></tr><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                <span class="strong"><strong>Amazon Elastic Container Service for
                Kubernetes (EKS)</strong></span>
              </p>
            </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; border-bottom: 1px solid ; ">
              <p>
                containerd
              </p>
            </td><td style="text-align: center; vertical-align: top; border-bottom: 1px solid ; ">
              <p>
                ✓
              </p>
            </td></tr><tr><td style="text-align: center; vertical-align: top; border-right: 1px solid ; ">
              <p>
                <span class="strong"><strong>IBM Hyper Protect Platform</strong></span>
              </p>
            </td><td style="text-align: center; vertical-align: top; border-right: 1px solid ; ">
              <p>
                docker/podman
              </p>
            </td><td style="text-align: center; vertical-align: top; ">
              <p>
                ❋❋
              </p>
            </td></tr></tbody></table></div></div><p>
      ✓ Fully compatible and fully supported
    </p><p>
      ❋ Workload specific: fully supported but compatibility depends on type of
      container (privileged or unprivileged) and on the application
      interactions (direct with kernel-version-specific data structures,
      kernel-version-specific modules, etc.)
    </p><p>
      ❋❋ Provisional support status until testing is completed for full compatibility and full support.
    </p><p>
      Refer to the
      <a class="link" href="https://www.suse.com/suse-rancher/support-matrix/all-supported-versions/" target="_blank">Rancher
      Support Matrix</a> for more information regarding support for
      Rancher-related products.
    </p></section><section class="sect2" id="sec-sle-container-support-plans" data-id-title="Support plans"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">21.3 </span><span class="title-name">Support plans</span></span> <a title="Permalink" class="permalink" href="#sec-sle-container-support-plans">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      There are three guiding principles of SUSE container support.
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          The container image lifecycle follows the lifecycle of the related
          products.
        </p><p>
          For example, SLESS 15 SP4 container images follow the SLES 15 SP4
          lifecycle.
        </p></li><li class="listitem"><p>
          Container release status also matches the status of the related
          product.
        </p><p>
          For example, if SLES 15 SP4 is in Alpha, Beta, RC or GA stage, the
          related containers have the same release status.
        </p></li><li class="listitem"><p>
          Containers are built using the packages from the related products.
        </p><p>
          For example, SLES 15 SP4 container images are built using the same
          packages as the main SLES 15 SP4 release.
        </p></li></ol></div><p>
      For further information, refer to the
      <a class="link" href="https://www.suse.com/lifecycle" target="_blank">Product Support
      Lifecycle</a> page and the documentation available for specific
      container images on
      <a class="link" href="https://registry.suse.com" target="_blank">SUSE Registry</a>.
    </p><p>
      Container images can have different support status, and they can have
      limited support. Refer to the appropriate
      <a class="link" href="https://registry.suse.com" target="_blank">https://registry.suse.com</a> page
      for the further information about a specific container image.
    </p></section><section class="sect2" id="sec-supported-containers-hosts" data-id-title="Containers and host environments support overview"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">21.4 </span><span class="title-name">Containers and host environments support overview</span></span> <a title="Permalink" class="permalink" href="#sec-supported-containers-hosts">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      The following support options are valid for SLES containers on SUSE
      host environments.
    </p><p>
      Containers and host environments delivered by SUSE are fully supported.
      This also applies to all products under support, including both general
      support and
      <a class="link" href="https://www.suse.com/products/long-term-service-pack-support/" target="_blank">Long
      Term Service Pack Support</a> (LTSS).
    </p><p>
      Partner containers and host environments with a joint engineering
      collaboration agreement are fully supported. This applies to both the
      container and host environment as well as all products under support
      (both general and LTSS) covered by the agreement.
    </p><p>
      While SUSE-based containers are fully supported, issues in the host
      environment must be handled by the host environment vendor. SUSE
      supports components that come from the SUSE base containers. Packages
      from SUSE repositories are also supported. Additional components and
      applications in the containers are not covered by SUSE support. No
      subscription is required for building derived containers based on the
      content of the SLE SLE BCIs or the SLE_BCI Repository. To build
      containers that include packages from the full SLE universe, you need
      a subscription that grants you access to the repositories containing
      these packages.
    </p><p>
      Any container and host environment not mentioned above has limited
      support. Details can be discussed with the SUSE Support Team
      responsible for triaging the issue and recommending alternative
      solutions. In any other case, issues in the host environment must be
      handled by the host environment vendor.
    </p></section><section class="sect2" id="sec-tech-previews" data-id-title="Technology previews"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">21.5 </span><span class="title-name">Technology previews</span></span> <a title="Permalink" class="permalink" href="#sec-tech-previews">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      Container images labeled as <span class="emphasis"><em>Tech Preview</em></span> are
      provided by SUSE to give you an opportunity to test new technologies
      within your environment and share your feedback. If you test a technology
      preview, contact your SUSE representative to share your experiences and
      use cases. Your input is helpful for future development.
    </p><p>
      Technology previews come with the following limitations:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          Technology previews may be functionally incomplete, unstable, and not
          suitable for production use.
        </p></li><li class="listitem"><p>
          Technology previews are not supported.
        </p></li><li class="listitem"><p>
          Technology previews may be available only for specific hardware
          architectures.
        </p></li><li class="listitem"><p>
          Specifics and functionality of technology previews are subject to
          change. As a result, upgrading to subsequent releases of a technology
          preview may not be possible and may require a fresh installation.
        </p></li><li class="listitem"><p>
          Technology previews can be canceled at any time. For example, this
          might happen if SUSE discovers that a preview does not meet the
          customer or market needs, or that it does not comply with enterprise
          standards. SUSE does not commit to providing a supported version of
          such technologies in the future.
        </p></li></ul></div><p>
      Container images are labeled as <span class="emphasis"><em>Tech Preview</em></span> and are
      marked as such at
      <a class="link" href="https://registry.suse.com" target="_blank">registry.suse.com</a>.
      Additionally, container images that are technology previews include the
      <code class="literal">com.suse.supportlevel="techpreview"</code> label in the
      container image metadata. You can check whether the metadata includes the
      label using the <code class="literal">docker inspect</code> command, or an
      appropriate command in other container runtimes.
    </p></section></section><section xml:lang="en" class="sect1" id="container-troubleshoot" data-id-title="Troubleshooting"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">22 </span><span class="title-name">Troubleshooting</span></span> <a title="Permalink" class="permalink" href="#container-troubleshoot">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect2" id="sec-container-diff" data-id-title="Analyze container images with container-diff"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">22.1 </span><span class="title-name">Analyze container images with <span class="package">container-diff</span></span></span> <a title="Permalink" class="permalink" href="#sec-container-diff">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
      In case a custom Docker Open Source Engine container image built on top of the SLE-Base
      container image is not working as expected, the
      <span class="package">container-diff</span> tool can help you analyze the image and
      collect information relevant for troubleshooting.
    </p><p>
      <span class="package">container-diff</span> makes it possible to analyze image
      changes by computing differences between images and presenting the diff
      in a human-readable and actionable format. The tool can find differences
      in system packages, language-level packages, and files in a container
      image.
    </p><p>
      <span class="package">container-diff</span> can handle local container images
      (using the prefix <code class="literal">daemon://</code>), images in a remote
      registry (using the prefix <code class="literal">remote://</code>), and images
      saved as <code class="filename">.tar</code> archives. You can use
      <span class="package">container-diff</span> to compute the diff between a local
      version of an image and a remote version.
    </p><p>
      To install <span class="package">container-diff</span>, run the <code class="command">sudo
      zypper in container-diff</code> command.
    </p><section class="sect3" id="sec-container-diff-basics" data-id-title="Basic container-diff commands"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">22.1.1 </span><span class="title-name">Basic <span class="package">container-diff</span> commands</span></span> <a title="Permalink" class="permalink" href="#sec-container-diff-basics">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
        The command <code class="command">container-diff analyze
        <em class="replaceable">IMAGE</em></code> runs a standard analysis on
        a single image. By default, it returns a hash and size of the container
        image. For more information that can help you to identify and fix
        problems, use the specific analyzers. Use the <code class="option">--type</code>
        parameter to specify the desired analyzer. Two of the most useful
        analyzers are <code class="option">history</code> (returns a list of descriptions
        of how an image layer was created) and <code class="option">file</code> (returns a
        list of file system contents, including names, paths, and sizes):
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo container-diff analyze --type=history daemon://<em class="replaceable">IMAGE</em>
    <code class="prompt user">&gt; </code>sudo container-diff analyze --type=file daemon://<em class="replaceable">IMAGE</em></pre></div><p>
        To view all available parameters and their brief descriptions, run the
        <code class="command">container-diff analyze --help</code> command.
      </p><p>
        Using the <code class="command">container-diff diff</code> command, you can
        compare two container images and examine differences between them.
        Similar to the <code class="command">container-diff analyze</code> command,
        <code class="command">container-diff diff</code> supports several parameters. The
        example command below compares two images and returns a list of
        descriptions of how IMAGE2 was created from IMAGE1.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>sudo container-diff diff daemon://<em class="replaceable">IMAGE1</em> daemon://<em class="replaceable">IMAGE2</em> --type=history</pre></div><p>
        To view all available parameters and their brief descriptions, run the
        <code class="command">container-diff diff --help</code> command.
      </p></section></section></section><section xml:lang="en" class="sect1" id="container-terms" data-id-title="Terminology"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">23 </span><span class="title-name">Terminology</span></span> <a title="Permalink" class="permalink" href="#container-terms">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.24.2.1"><span class="term">Container</span></dt><dd><p>
          A <span class="emphasis"><em>container</em></span> is a running instance based on a
          particular container image. Each <span class="emphasis"><em>container</em></span> can
          be distinguished by a unique container ID.
        </p></dd><dt id="id-1.24.2.2"><span class="term">Control groups</span></dt><dd><p>
          <span class="emphasis"><em>Control groups</em></span>, also called
          <code class="literal">cgroups</code> , are a Linux kernel feature that allows
          aggregating or partitioning tasks (processes) and all their children
          into hierarchically-organized groups, to manage their resource
          limits.
        </p></dd><dt id="id-1.24.2.3"><span class="term">Docker Open Source Engine</span></dt><dd><p>
          Docker Open Source Engine is a server-client type application that
          performs all tasks related to containers. Docker Open Source Engine
          comprises the following: +
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
              <span class="strong"><strong>Daemon:.</strong></span> + The server side of
              Docker Open Source Engine, which manages all Docker objects
              (images, containers, network connections used by containers,
              etc.).
            </p></li><li class="listitem"><p>
              <span class="strong"><strong>REST API:.</strong></span> + Applications can
              use this API to communicate directly with the daemon.
            </p></li><li class="listitem"><p>
              <span class="strong"><strong>CLI client:.</strong></span> + Enables you to
              communicate with the daemon. If the daemon is running on a
              different machine than the CLI client, the CLI client can
              communicate by using network sockets or the REST API provided by
              Docker Open Source Engine.
            </p></li></ul></div></dd><dt id="id-1.24.2.4"><span class="term">Dockerfile</span></dt><dd><p>
          A <span class="emphasis"><em>Dockerfile</em></span> provides instructions on how to
          build a container image. Docker Open Source Engine reads instructions
          in the <span class="emphasis"><em>Dockerfile</em></span> and builds a new image
          according to the instructions.
        </p></dd><dt id="id-1.24.2.5"><span class="term">Image</span></dt><dd><p>
          An <span class="emphasis"><em>image</em></span> is a read-only template used to create
          a <span class="emphasis"><em>container</em></span>. A Docker image is made of a series
          of layers built one over the other. Each layer corresponds to a
          permanent change, for example, an update of an application. The
          changes are stored in a file called a
          <span class="emphasis"><em>Dockerfile</em></span>. For more details, see
          <a class="link" href="http://docs.docker.com/engine/reference/glossary#image" target="_blank">the
          official Docker documentation</a>.
        </p></dd><dt id="id-1.24.2.6"><span class="term">Container image</span></dt><dd><p>
          A <span class="emphasis"><em>container image</em></span> is an unchangeable, static
          file that includes executable code so it can run an isolated process
          on IT infrastructure. The image is comprised of system libraries,
          system tools, and other platform settings a program needs to run on a
          containerization platform. A container image is compiled from file
          system layers built on top of a parent or base image.
        </p></dd><dt id="id-1.24.2.7"><span class="term">Base image</span></dt><dd><p>
          A <span class="emphasis"><em>base image</em></span> is an image that does not have a
          parent image. In a Dockerfile, a base image is identified by the
          <code class="literal">FROM scratch</code> directive.
        </p></dd><dt id="id-1.24.2.8"><span class="term">Parent image</span></dt><dd><p>
          The image that serves as the basis for another container image. In
          other words, if an image is not a base image, it is derived from a
          parent image. In a Dockerfile, the <code class="literal">FROM</code> directive
          is pointing to the parent image. Most Docker containers are created
          using parent images.
        </p></dd><dt id="id-1.24.2.9"><span class="term">Namespaces</span></dt><dd><p>
          Docker Open Source Engine uses Linux <span class="emphasis"><em>namespaces</em></span>
          for its containers, which isolates resources reserved for particular
          containers.
        </p></dd><dt id="id-1.24.2.10"><span class="term">Orchestration</span></dt><dd><p>
          In a production environment, you typically need a cluster with many
          containers on each cluster node. The containers must cooperate and
          you need a framework that enables you to automatically manage the
          containers. The act of automatic container management is called
          container orchestration and is typically handled by Kubernetes.
        </p></dd><dt id="id-1.24.2.11"><span class="term">Registry</span></dt><dd><p>
          A <span class="emphasis"><em>registry</em></span> is storage for already-created
          images. It typically contains several
          <span class="emphasis"><em>repositories</em></span>. There are two types of registries:
          +
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
              public registry: Any (usually registered) user can download and
              use images. A typical example of a public registry is
              <a class="link" href="https://hub.docker.com/" target="_blank">Docker Hub</a>.
            </p></li><li class="listitem"><p>
              private registry: Access is restricted to particular users, or
              from a particular private network.
            </p></li></ul></div></dd><dt id="id-1.24.2.12"><span class="term">Repository</span></dt><dd><p>
          A <span class="emphasis"><em>repository</em></span> is storage for images in a
          <span class="emphasis"><em>registry</em></span>.
        </p></dd></dl></div></section><section xml:lang="en" class="sect1" id="container-feedback" data-id-title="Improving the documentation"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">24 </span><span class="title-name">Improving the documentation</span></span> <a title="Permalink" class="permalink" href="#container-feedback">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Feedback and contributions to this documentation can be submitted using any
    of the following options.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.25.3.1"><span class="term">Service requests and support</span></dt><dd><p>
          For services and support options available for your product, see
          <a class="link" href="https://www.suse.com/support/" target="_blank">https://www.suse.com/support/</a>. To open a service
          request, you need a SUSE subscription registered at SUSE Customer
          Center. Go to
          <a class="link" href="https://scc.suse.com/support/requests" target="_blank">https://scc.suse.com/support/requests</a>, log in,
          and click <span class="emphasis"><em>Create New</em></span>.
        </p></dd><dt id="id-1.25.3.2"><span class="term">Bug reports</span></dt><dd><p>
          Report issues with the documentation at
          <a class="link" href="https://bugzilla.suse.com/" target="_blank">https://bugzilla.suse.com/</a> (this requires a
          Bugzilla account). To simplify the process, use the <span class="emphasis"><em>Report
          an issue link</em></span> in the HTML version of this document. Point
          the cursor to the desired sentence, and click <span class="emphasis"><em>Report an
          issue</em></span> in the <span class="emphasis"><em>Give feedback</em></span> section of
          the right-side navigation panel. This automatically selects the
          correct product and category in Bugzilla and adds a link to the
          current section. You can now write your bug report.
        </p></dd><dt id="id-1.25.3.3"><span class="term">Contributions</span></dt><dd><p>
          To contribute to this documentation, use the <span class="emphasis"><em>Edit source
          document</em></span> link in the HTML version of this document (this
          requires a GitHub account). Point the cursor to the desired sentence,
          and click <span class="emphasis"><em>Report an issue</em></span> in the <span class="emphasis"><em>Give
          feedback</em></span> section of the right-side navigation panel. This
          takes you to the source code on GitHub, where you can open a pull
          request.
        </p></dd></dl></div><div id="id-1.25.4" data-id-title="Edit source document only available for English" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Edit source document only available for English</div><p>
      The <span class="emphasis"><em>Edit source</em></span> document links are only available
      for the English version of each document. For all other languages, use
      the <span class="emphasis"><em>Report an issue link</em></span> as described above.
    </p></div><p>
    For more information about the documentation environment used for this
    documentation, refer to the repository's <span class="emphasis"><em>README</em></span> file
    at
    <a class="link" href="https://github.com/SUSE/doc-unversioned/blob/main/README.adoc" target="_blank">https://github.com/SUSE/doc-unversioned/blob/main/README.adoc</a>
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.25.6.1"><span class="term">Mail</span></dt><dd><p>
          You can also report errors and send feedback concerning the
          documentation to &lt;<a class="email" href="mailto:doc-team@suse.com">doc-team@suse.com</a>&gt;. Include the
          document title, the product version, and the publication date of the
          document. Additionally, include the relevant section number and title
          (or provide the URL), and provide a concise description of the
          problem.
        </p></dd></dl></div></section><section class="sect1" id="legal-disclaimer" data-id-title="Legal Notice"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">25 </span><span class="title-name">Legal Notice</span></span> <a title="Permalink" class="permalink" href="#legal-disclaimer">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p> Copyright© 2006– 2023
 SUSE LLC and contributors.
  All rights reserved. </p><p>
    Permission is granted to copy, distribute and/or modify this document under the terms of the
    GNU Free Documentation License, Version 1.2 or (at your option) version 1.3; with the Invariant
    Section being this copyright notice and license. A copy of the license version 1.2 is included
    in the section entitled <span class="quote">“<span class="quote">GNU Free Documentation License</span>”</span>.
  </p><p>
    For SUSE trademarks, see <a class="link" href="http://www.suse.com/company/legal/" target="_blank">http://www.suse.com/company/legal/</a>. All other
    third-party trademarks are the property of their respective owners. Trademark symbols (®, ™
    etc.) denote trademarks of SUSE and its affiliates. Asterisks (*) denote third-party
    trademarks.
  </p><p>
    All information found in this book has been compiled with utmost attention to detail. However,
    this does not guarantee complete accuracy.  Neither SUSE LLC, its affiliates, the authors, nor
    the translators shall be held liable for possible errors or the consequences thereof.
  </p></section><div class="legal-section"><section class="sect1" id="id-1.27" data-id-title="GNU Free Documentation License"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">26 </span><span class="title-name">GNU Free Documentation License</span></span> <a title="Permalink" class="permalink" href="#id-1.27">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-unversioned/tree/main/container-guide/Container-guide.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Copyright (C) 2000, 2001, 2002 Free Software Foundation, Inc. 51 Franklin St,
  Fifth Floor, Boston, MA 02110-1301 USA. Everyone is permitted to copy and
  distribute verbatim copies of this license document, but changing it is not
  allowed.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.27.3"><span class="name">
    0. PREAMBLE
  </span><a title="Permalink" class="permalink" href="#id-1.27.3">#</a></h5></div><p>
  The purpose of this License is to make a manual, textbook, or other
  functional and useful document "free" in the sense of freedom: to assure
  everyone the effective freedom to copy and redistribute it, with or without
  modifying it, either commercially or non-commercially. Secondarily, this
  License preserves for the author and publisher a way to get credit for their
  work, while not being considered responsible for modifications made by
  others.
 </p><p>
  This License is a kind of "copyleft", which means that derivative works of
  the document must themselves be free in the same sense. It complements the
  GNU General Public License, which is a copyleft license designed for free
  software.
 </p><p>
  We have designed this License to use it for manuals for free software,
  because free software needs free documentation: a free program should come
  with manuals providing the same freedoms that the software does. But this
  License is not limited to software manuals; it can be used for any textual
  work, regardless of subject matter or whether it is published as a printed
  book. We recommend this License principally for works whose purpose is
  instruction or reference.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.27.7"><span class="name">
    1. APPLICABILITY AND DEFINITIONS
  </span><a title="Permalink" class="permalink" href="#id-1.27.7">#</a></h5></div><p>
  This License applies to any manual or other work, in any medium, that
  contains a notice placed by the copyright holder saying it can be distributed
  under the terms of this License. Such a notice grants a world-wide,
  royalty-free license, unlimited in duration, to use that work under the
  conditions stated herein. The "Document", below, refers to any such manual or
  work. Any member of the public is a licensee, and is addressed as "you". You
  accept the license if you copy, modify or distribute the work in a way
  requiring permission under copyright law.
 </p><p>
  A "Modified Version" of the Document means any work containing the Document
  or a portion of it, either copied verbatim, or with modifications and/or
  translated into another language.
 </p><p>
  A "Secondary Section" is a named appendix or a front-matter section of the
  Document that deals exclusively with the relationship of the publishers or
  authors of the Document to the Document's overall subject (or to related
  matters) and contains nothing that could fall directly within that overall
  subject. (Thus, if the Document is in part a textbook of mathematics, a
  Secondary Section may not explain any mathematics.) The relationship could be
  a matter of historical connection with the subject or with related matters,
  or of legal, commercial, philosophical, ethical or political position
  regarding them.
 </p><p>
  The "Invariant Sections" are certain Secondary Sections whose titles are
  designated, as being those of Invariant Sections, in the notice that says
  that the Document is released under this License. If a section does not fit
  the above definition of Secondary then it is not allowed to be designated as
  Invariant. The Document may contain zero Invariant Sections. If the Document
  does not identify any Invariant Sections then there are none.
 </p><p>
  The "Cover Texts" are certain short passages of text that are listed, as
  Front-Cover Texts or Back-Cover Texts, in the notice that says that the
  Document is released under this License. A Front-Cover Text may be at most 5
  words, and a Back-Cover Text may be at most 25 words.
 </p><p>
  A "Transparent" copy of the Document means a machine-readable copy,
  represented in a format whose specification is available to the general
  public, that is suitable for revising the document straightforwardly with
  generic text editors or (for images composed of pixels) generic paint
  programs or (for drawings) some widely available drawing editor, and that is
  suitable for input to text formatters or for automatic translation to a
  variety of formats suitable for input to text formatters. A copy made in an
  otherwise Transparent file format whose markup, or absence of markup, has
  been arranged to thwart or discourage subsequent modification by readers is
  not Transparent. An image format is not Transparent if used for any
  substantial amount of text. A copy that is not "Transparent" is called
  "Opaque".
 </p><p>
  Examples of suitable formats for Transparent copies include plain ASCII
  without markup, Texinfo input format, LaTeX input format, SGML or XML using a
  publicly available DTD, and standard-conforming simple HTML, PostScript or
  PDF designed for human modification. Examples of transparent image formats
  include PNG, XCF and JPG. Opaque formats include proprietary formats that can
  be read and edited only by proprietary word processors, SGML or XML for which
  the DTD and/or processing tools are not generally available, and the
  machine-generated HTML, PostScript or PDF produced by some word processors
  for output purposes only.
 </p><p>
  The "Title Page" means, for a printed book, the title page itself, plus such
  following pages as are needed to hold, legibly, the material this License
  requires to appear in the title page. For works in formats which do not have
  any title page as such, "Title Page" means the text near the most prominent
  appearance of the work's title, preceding the beginning of the body of the
  text.
 </p><p>
  A section "Entitled XYZ" means a named subunit of the Document whose title
  either is precisely XYZ or contains XYZ in parentheses following text that
  translates XYZ in another language. (Here XYZ stands for a specific section
  name mentioned below, such as "Acknowledgements", "Dedications",
  "Endorsements", or "History".) To "Preserve the Title" of such a section when
  you modify the Document means that it remains a section "Entitled XYZ"
  according to this definition.
 </p><p>
  The Document may include Warranty Disclaimers next to the notice which states
  that this License applies to the Document. These Warranty Disclaimers are
  considered to be included by reference in this License, but only as regards
  disclaiming warranties: any other implication that these Warranty Disclaimers
  may have is void and has no effect on the meaning of this License.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.27.18"><span class="name">
    2. VERBATIM COPYING
  </span><a title="Permalink" class="permalink" href="#id-1.27.18">#</a></h5></div><p>
  You may copy and distribute the Document in any medium, either commercially
  or non-commercially, provided that this License, the copyright notices, and
  the license notice saying this License applies to the Document are reproduced
  in all copies, and that you add no other conditions whatsoever to those of
  this License. You may not use technical measures to obstruct or control the
  reading or further copying of the copies you make or distribute. However, you
  may accept compensation in exchange for copies. If you distribute a large
  enough number of copies you must also follow the conditions in section 3.
 </p><p>
  You may also lend copies, under the same conditions stated above, and you may
  publicly display copies.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.27.21"><span class="name">
    3. COPYING IN QUANTITY
  </span><a title="Permalink" class="permalink" href="#id-1.27.21">#</a></h5></div><p>
  If you publish printed copies (or copies in media that commonly have printed
  covers) of the Document, numbering more than 100, and the Document's license
  notice requires Cover Texts, you must enclose the copies in covers that
  carry, clearly and legibly, all these Cover Texts: Front-Cover Texts on the
  front cover, and Back-Cover Texts on the back cover. Both covers must also
  clearly and legibly identify you as the publisher of these copies. The front
  cover must present the full title with all words of the title equally
  prominent and visible. You may add other material on the covers in addition.
  Copying with changes limited to the covers, as long as they preserve the
  title of the Document and satisfy these conditions, can be treated as
  verbatim copying in other respects.
 </p><p>
  If the required texts for either cover are too voluminous to fit legibly, you
  should put the first ones listed (as many as fit reasonably) on the actual
  cover, and continue the rest onto adjacent pages.
 </p><p>
  If you publish or distribute Opaque copies of the Document numbering more
  than 100, you must either include a machine-readable Transparent copy along
  with each Opaque copy, or state in or with each Opaque copy a
  computer-network location from which the general network-using public has
  access to download using public-standard network protocols a complete
  Transparent copy of the Document, free of added material. If you use the
  latter option, you must take reasonably prudent steps, when you begin
  distribution of Opaque copies in quantity, to ensure that this Transparent
  copy will remain thus accessible at the stated location until at least one
  year after the last time you distribute an Opaque copy (directly or through
  your agents or retailers) of that edition to the public.
 </p><p>
  It is requested, but not required, that you contact the authors of the
  Document well before redistributing any large number of copies, to give them
  a chance to provide you with an updated version of the Document.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.27.26"><span class="name">
    4. MODIFICATIONS
  </span><a title="Permalink" class="permalink" href="#id-1.27.26">#</a></h5></div><p>
  You may copy and distribute a Modified Version of the Document under the
  conditions of sections 2 and 3 above, provided that you release the Modified
  Version under precisely this License, with the Modified Version filling the
  role of the Document, thus licensing distribution and modification of the
  Modified Version to whoever possesses a copy of it. In addition, you must do
  these things in the Modified Version:
 </p><div class="orderedlist"><ol class="orderedlist" type="A"><li class="listitem"><p>
    Use in the Title Page (and on the covers, if any) a title distinct from
    that of the Document, and from those of previous versions (which should, if
    there were any, be listed in the History section of the Document). You may
    use the same title as a previous version if the original publisher of that
    version gives permission.
   </p></li><li class="listitem"><p>
    List on the Title Page, as authors, one or more persons or entities
    responsible for authorship of the modifications in the Modified Version,
    together with at least five of the principal authors of the Document (all
    of its principal authors, if it has fewer than five), unless they release
    you from this requirement.
   </p></li><li class="listitem"><p>
    State on the Title page the name of the publisher of the Modified Version,
    as the publisher.
   </p></li><li class="listitem"><p>
    Preserve all the copyright notices of the Document.
   </p></li><li class="listitem"><p>
    Add an appropriate copyright notice for your modifications adjacent to the
    other copyright notices.
   </p></li><li class="listitem"><p>
    Include, immediately after the copyright notices, a license notice giving
    the public permission to use the Modified Version under the terms of this
    License, in the form shown in the Addendum below.
   </p></li><li class="listitem"><p>
    Preserve in that license notice the full lists of Invariant Sections and
    required Cover Texts given in the Document's license notice.
   </p></li><li class="listitem"><p>
    Include an unaltered copy of this License.
   </p></li><li class="listitem"><p>
    Preserve the section Entitled "History", Preserve its Title, and add to it
    an item stating at least the title, year, new authors, and publisher of the
    Modified Version as given on the Title Page. If there is no section
    Entitled "History" in the Document, create one stating the title, year,
    authors, and publisher of the Document as given on its Title Page, then add
    an item describing the Modified Version as stated in the previous sentence.
   </p></li><li class="listitem"><p>
    Preserve the network location, if any, given in the Document for public
    access to a Transparent copy of the Document, and likewise the network
    locations given in the Document for previous versions it was based on.
    These may be placed in the "History" section. You may omit a network
    location for a work that was published at least four years before the
    Document itself, or if the original publisher of the version it refers to
    gives permission.
   </p></li><li class="listitem"><p>
    For any section Entitled "Acknowledgements" or "Dedications", Preserve the
    Title of the section, and preserve in the section all the substance and
    tone of each of the contributor acknowledgements and/or dedications given
    therein.
   </p></li><li class="listitem"><p>
    Preserve all the Invariant Sections of the Document, unaltered in their
    text and in their titles. Section numbers or the equivalent are not
    considered part of the section titles.
   </p></li><li class="listitem"><p>
    Delete any section Entitled "Endorsements". Such a section may not be
    included in the Modified Version.
   </p></li><li class="listitem"><p>
    Do not retitle any existing section to be Entitled "Endorsements" or to
    conflict in title with any Invariant Section.
   </p></li><li class="listitem"><p>
    Preserve any Warranty Disclaimers.
   </p></li></ol></div><p>
  If the Modified Version includes new front-matter sections or appendices that
  qualify as Secondary Sections and contain no material copied from the
  Document, you may at your option designate some or all of these sections as
  invariant. To do this, add their titles to the list of Invariant Sections in
  the Modified Version's license notice. These titles must be distinct from any
  other section titles.
 </p><p>
  You may add a section Entitled "Endorsements", provided it contains nothing
  but endorsements of your Modified Version by various parties--for example,
  statements of peer review or that the text has been approved by an
  organization as the authoritative definition of a standard.
 </p><p>
  You may add a passage of up to five words as a Front-Cover Text, and a
  passage of up to 25 words as a Back-Cover Text, to the end of the list of
  Cover Texts in the Modified Version. Only one passage of Front-Cover Text and
  one of Back-Cover Text may be added by (or through arrangements made by) any
  one entity. If the Document already includes a cover text for the same cover,
  previously added by you or by arrangement made by the same entity you are
  acting on behalf of, you may not add another; but you may replace the old
  one, on explicit permission from the previous publisher that added the old
  one.
 </p><p>
  The author(s) and publisher(s) of the Document do not by this License give
  permission to use their names for publicity for or to assert or imply
  endorsement of any Modified Version.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.27.33"><span class="name">
    5. COMBINING DOCUMENTS
  </span><a title="Permalink" class="permalink" href="#id-1.27.33">#</a></h5></div><p>
  You may combine the Document with other documents released under this
  License, under the terms defined in section 4 above for modified versions,
  provided that you include in the combination all of the Invariant Sections of
  all of the original documents, unmodified, and list them all as Invariant
  Sections of your combined work in its license notice, and that you preserve
  all their Warranty Disclaimers.
 </p><p>
  The combined work need only contain one copy of this License, and multiple
  identical Invariant Sections may be replaced with a single copy. If there are
  multiple Invariant Sections with the same name but different contents, make
  the title of each such section unique by adding at the end of it, in
  parentheses, the name of the original author or publisher of that section if
  known, or else a unique number. Make the same adjustment to the section
  titles in the list of Invariant Sections in the license notice of the
  combined work.
 </p><p>
  In the combination, you must combine any sections Entitled "History" in the
  various original documents, forming one section Entitled "History"; likewise
  combine any sections Entitled "Acknowledgements", and any sections Entitled
  "Dedications". You must delete all sections Entitled "Endorsements".
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.27.37"><span class="name">
    6. COLLECTIONS OF DOCUMENTS
  </span><a title="Permalink" class="permalink" href="#id-1.27.37">#</a></h5></div><p>
  You may make a collection consisting of the Document and other documents
  released under this License, and replace the individual copies of this
  License in the various documents with a single copy that is included in the
  collection, provided that you follow the rules of this License for verbatim
  copying of each of the documents in all other respects.
 </p><p>
  You may extract a single document from such a collection, and distribute it
  individually under this License, provided you insert a copy of this License
  into the extracted document, and follow this License in all other respects
  regarding verbatim copying of that document.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.27.40"><span class="name">
    7. AGGREGATION WITH INDEPENDENT WORKS
  </span><a title="Permalink" class="permalink" href="#id-1.27.40">#</a></h5></div><p>
  A compilation of the Document or its derivatives with other separate and
  independent documents or works, in or on a volume of a storage or
  distribution medium, is called an "aggregate" if the copyright resulting from
  the compilation is not used to limit the legal rights of the compilation's
  users beyond what the individual works permit. When the Document is included
  in an aggregate, this License does not apply to the other works in the
  aggregate which are not themselves derivative works of the Document.
 </p><p>
  If the Cover Text requirement of section 3 is applicable to these copies of
  the Document, then if the Document is less than one half of the entire
  aggregate, the Document's Cover Texts may be placed on covers that bracket
  the Document within the aggregate, or the electronic equivalent of covers if
  the Document is in electronic form. Otherwise they must appear on printed
  covers that bracket the whole aggregate.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.27.43"><span class="name">
    8. TRANSLATION
  </span><a title="Permalink" class="permalink" href="#id-1.27.43">#</a></h5></div><p>
  Translation is considered a kind of modification, so you may distribute
  translations of the Document under the terms of section 4. Replacing
  Invariant Sections with translations requires special permission from their
  copyright holders, but you may include translations of some or all Invariant
  Sections in addition to the original versions of these Invariant Sections.
  You may include a translation of this License, and all the license notices in
  the Document, and any Warranty Disclaimers, provided that you also include
  the original English version of this License and the original versions of
  those notices and disclaimers. In case of a disagreement between the
  translation and the original version of this License or a notice or
  disclaimer, the original version will prevail.
 </p><p>
  If a section in the Document is Entitled "Acknowledgements", "Dedications",
  or "History", the requirement (section 4) to Preserve its Title (section 1)
  will typically require changing the actual title.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.27.46"><span class="name">
    9. TERMINATION
  </span><a title="Permalink" class="permalink" href="#id-1.27.46">#</a></h5></div><p>
  You may not copy, modify, sublicense, or distribute the Document except as
  expressly provided for under this License. Any other attempt to copy, modify,
  sublicense or distribute the Document is void, and will automatically
  terminate your rights under this License. However, parties who have received
  copies, or rights, from you under this License will not have their licenses
  terminated so long as such parties remain in full compliance.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.27.48"><span class="name">
    10. FUTURE REVISIONS OF THIS LICENSE
  </span><a title="Permalink" class="permalink" href="#id-1.27.48">#</a></h5></div><p>
  The Free Software Foundation may publish new, revised versions of the GNU
  Free Documentation License from time to time. Such new versions will be
  similar in spirit to the present version, but may differ in detail to address
  new problems or concerns. See
  <a class="link" href="http://www.gnu.org/copyleft/" target="_blank">http://www.gnu.org/copyleft/</a>.
 </p><p>
  Each version of the License is given a distinguishing version number. If the
  Document specifies that a particular numbered version of this License "or any
  later version" applies to it, you have the option of following the terms and
  conditions either of that specified version or of any later version that has
  been published (not as a draft) by the Free Software Foundation. If the
  Document does not specify a version number of this License, you may choose
  any version ever published (not as a draft) by the Free Software Foundation.
 </p><div class="sect4 bridgehead"><h5 class="title legal" id="id-1.27.51"><span class="name">
    ADDENDUM: How to use this License for your documents
  </span><a title="Permalink" class="permalink" href="#id-1.27.51">#</a></h5></div><div class="verbatim-wrap"><pre class="screen">Copyright (c) YEAR YOUR NAME.
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled “GNU
Free Documentation License”.</pre></div><p>
  If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
  replace the “with...Texts.” line with this:
 </p><div class="verbatim-wrap"><pre class="screen">with the Invariant Sections being LIST THEIR TITLES, with the
Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.</pre></div><p>
  If you have Invariant Sections without Cover Texts, or some other combination
  of the three, merge those two alternatives to suit the situation.
 </p><p>
  If your document contains nontrivial examples of program code, we recommend
  releasing these examples in parallel under your choice of free software
  license, such as the GNU General Public License, to permit their use in free
  software.
 </p></section></div></section></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="section"><a href="#container-basics"><span class="title-number">1 </span><span class="title-name">Introduction to Linux containers</span></a></span></li><li><span class="section"><a href="#container-tools"><span class="title-number">2 </span><span class="title-name">Tools for building images and managing containers</span></a></span></li><li><span class="section"><a href="#container-bci-intro"><span class="title-number">3 </span><span class="title-name">Introduction to SLE Base Container Images</span></a></span></li><li><span class="section"><a href="#container-bci-general"><span class="title-number">4 </span><span class="title-name">General-purpose SLE Base Container Images</span></a></span></li><li><span class="section"><a href="#container-bci-language"><span class="title-number">5 </span><span class="title-name">Language stack SLE Base Container Images</span></a></span></li><li><span class="section"><a href="#container-bci-app"><span class="title-number">6 </span><span class="title-name">Application SLE Base Container Images</span></a></span></li><li><span class="section"><a href="#container-bci-lifecycle"><span class="title-number">7 </span><span class="title-name">Important note on status and lifecycle SLE Base Container Images</span></a></span></li><li><span class="section"><a href="#container-bci-labels"><span class="title-number">8 </span><span class="title-name">SLE Base Container Image labels</span></a></span></li><li><span class="section"><a href="#container-bci-tags"><span class="title-number">9 </span><span class="title-name">SLE BCI tags</span></a></span></li><li><span class="section"><a href="#container-bci-understand"><span class="title-number">10 </span><span class="title-name">Understanding SLE BCIs</span></a></span></li><li><span class="section"><a href="#container-bci-get-started"><span class="title-number">11 </span><span class="title-name">Getting started with SLE Base Container Images</span></a></span></li><li><span class="section"><a href="#container-repo-reg"><span class="title-number">12 </span><span class="title-name">Registration and Online Repositories</span></a></span></li><li><span class="section"><a href="#container-podman"><span class="title-number">13 </span><span class="title-name">Podman overview</span></a></span></li><li><span class="section"><a href="#container-docker"><span class="title-number">14 </span><span class="title-name">Setting up Docker Open Source Engine</span></a></span></li><li><span class="section"><a href="#container-registry"><span class="title-number">15 </span><span class="title-name">Configuring image storage</span></a></span></li><li><span class="section"><a href="#container-verify"><span class="title-number">16 </span><span class="title-name">Verifying container images</span></a></span></li><li><span class="section"><a href="#container-buildah"><span class="title-number">17 </span><span class="title-name">Buildah overview</span></a></span></li><li><span class="section"><a href="#container-build-images"><span class="title-number">18 </span><span class="title-name">Creating custom container images</span></a></span></li><li><span class="section"><a href="#container-build-app-images"><span class="title-number">19 </span><span class="title-name">Creating application container images</span></a></span></li><li><span class="section"><a href="#container-orchestration"><span class="title-number">20 </span><span class="title-name">Container orchestration</span></a></span></li><li><span class="section"><a href="#container-support"><span class="title-number">21 </span><span class="title-name">Compatibility and support conditions</span></a></span></li><li><span class="section"><a href="#container-troubleshoot"><span class="title-number">22 </span><span class="title-name">Troubleshooting</span></a></span></li><li><span class="section"><a href="#container-terms"><span class="title-number">23 </span><span class="title-name">Terminology</span></a></span></li><li><span class="section"><a href="#container-feedback"><span class="title-number">24 </span><span class="title-name">Improving the documentation</span></a></span></li><li><span class="section"><a href="#legal-disclaimer"><span class="title-number">25 </span><span class="title-name">Legal Notice</span></a></span></li><li><span class="section"><a href="#id-1.27"><span class="title-number">26 </span><span class="title-name">GNU Free Documentation License</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2023</span></div></div></footer></body></html>